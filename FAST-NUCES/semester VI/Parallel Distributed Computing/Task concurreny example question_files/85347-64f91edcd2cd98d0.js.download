(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85347],{35726:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85556),i=r.__importDefault(n(98557)),o=n(53433),a=n(10530),s=r.__importDefault(n(48889)),u=n(8411),c=n(76196),d={accessToken:"X-CHEGG-ACCESS-TOKEN",idToken:"X-CHEGG-ID-TOKEN",csrfToken:"X-CHEGG-CSRF-TOKEN",apiKey:"X-CHEGG-CHECKOUTSDK-API-KEY",noCookie:"X-CHEGG-NO-COOKIES"},l=function(){function e(){}return e.doPostRequestToChegg=function(e,t,n,a){return void 0===n&&(n=null),void 0===a&&(a=3e4),r.__awaiter(this,void 0,void 0,(function(){var u,c,d,l;return r.__generator(this,(function(r){switch(r.label){case 0:u=o.cheggBaseUrl?o.cheggBaseUrl:i.default.cheggBaseUrl,c=this.getHeaders(n),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,s.default.request({url:"".concat(u).concat(e),method:"POST",data:t,timeout:a,headers:c,withCredentials:this.getWithCredentials()})];case 2:return[2,r.sent()];case 3:return d=r.sent(),l={passport:c["CHEGG-PASSPORT"],isInternal:!0,pageUrl:c["X-CHEGG-PAGE-URL"]},this.handleException(d,void 0,!0,l),[3,4];case 4:return[2]}}))}))},e.getAbsoluteDomainUrl=function(){return"undefined"==typeof window?o.cheggOrigin:window&&"location"in window&&"protocol"in window.location&&"host"in window.location?window.location.protocol+"//"+window.location.host:""},e.handleException=function(e,t,n,r){var i,o,a,s,d=e.message;if(null===(i=e.response)||void 0===i?void 0:i.status)switch(e.response.status){case 403:d="AUTHORIZE_FAILURE";break;case 400:d="BAD_REQUEST";break;case 500:d="INTERNAL_SERVER_ERROR"}if(u.AuthorizeErrors[d])s=u.AuthorizeErrors[d];else{s=u.AuthorizeErrors.UNKNOWN_FAILURE;var l=t?"graphql:".concat(t):t;if(!l){var _=null!==(a=null===(o=e.config)||void 0===o?void 0:o.url)&&void 0!==a?a:"_ajax/urlNotFound";l=_.substring(_.indexOf("_ajax"),-1!==_.indexOf("?")?_.indexOf("?"):_.length)}s.message="".concat(l,":").concat(d)}var g={errors:[s],data:null,success:!1};throw n&&(0,c.logErrorToNR)(g,r),new Error(JSON.stringify(g))},e.getWithCredentials=function(){return!(null===o.authorizeParams||void 0===o.authorizeParams?void 0:o.authorizeParams.noCookie)},e.getHeaders=function(t){void 0===t&&(t=null);var n={"content-type":"application/json;charset=UTF-8","X-CHEGG-CHECKOUTSDK-API-KEY":"unknown","X-CHEGG-ORIGIN":e.getAbsoluteDomainUrl()},r=o.authorizeParams||{apiKey:"unknown"},i=[];if(t&&(t.skipCsrfToken&&i.push("csrfToken"),t.loggedInState))switch(t.loggedInState){case a.LoggedInState.SOFT:i.push("accessToken");break;case a.LoggedInState.LOGGED_OUT:i.push("accessToken"),i.push("idToken")}return Object.keys(r).forEach((function(e){-1===i.indexOf(e)&&d[e]&&r[e]&&(n[d[e]]=r[e])})),n},e}();t.default=l},57411:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.operationsToBFF=void 0;var r=n(85556),i=r.__importDefault(n(35726)),o=n(53433),a=r.__importDefault(n(48889));t.operationsToBFF={checkoutBFFOperations:["createMethodOfPayment","getMethodOfPayments","updateMethodOfPayment","createCart","updateCart","checkout","addPromotions","removePromotions","orderManagement","logFECheckoutEvent"],digitalPricingBFFOperations:["getCities","getPricingV2_external","getPricingByExternalId_external","getNextInteraction_authState","getNextInteraction_taxQuote","getNextInteraction_mopDetails","getNextInteraction_orderDetails"]};var s={accessToken:"access_token",idToken:"id_token",bffKey:"Authorization"},u=function(){function e(){}return e.doFetchPersistedQuery=function(e,n,s,u){return r.__awaiter(this,void 0,void 0,(function(){var c,d;return r.__generator(this,(function(r){switch(r.label){case 0:return s=null!==s&&void 0!==s?s:3e4,c=function(e){return t.operationsToBFF.checkoutBFFOperations.includes(e)?o.cheggCheckoutBffGraphQLUrl:o.cheggDigitalPricingBFFGraphQLUrl}(e),d=this.getHeaders(),u=void 0===u||u,[4,a.default.request({url:c,method:"POST",data:JSON.stringify({operationName:e,variables:n}),timeout:s,headers:d,withCredentials:i.default.getWithCredentials()}).catch((function(t){var n={passport:d["CHEGG-PASSPORT"],isInternal:!0,pageUrl:d["X-CHEGG-PAGE-URL"]};return i.default.handleException(t,e,u,n)}))];case 1:return[2,r.sent()]}}))}))},e.getAbsoluteDomainUrl=function(){return"undefined"!==typeof window&&"location"in window&&window.location&&"protocol"in window.location&&"host"in window.location?"".concat(window.location.protocol,"//").concat(window.location.host):""},e.getSiteUrl=function(){return"undefined"!==typeof window&&"location"in window&&window.location&&"href"in window.location?window.location.href:""},e.getUserAgent=function(){return"undefined"!==typeof window&&"navigator"in window&&window.navigator&&"userAgent"in window.navigator?window.navigator.userAgent:""},e.getHeaders=function(t){void 0===t&&(t=null);var n={"content-type":"application/json;charset=UTF-8",Authorization:"unknown",Accept:"application/json","X-CHEGG-USER-AGENT":e.getUserAgent(),"X-CHEGG-PAGE-URL":e.getSiteUrl()},i=o.authorizeParams?r.__assign({},o.authorizeParams):{apiKey:"unknown",bffKey:"unknown"};return i.bffKey=i.bffKey?"Basic ".concat(i.bffKey):"unknown",Object.keys(i).forEach((function(e){s[e]&&i[e]&&(n[s[e]]=i[e])})),n},e}();t.default=u},91302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85556),i=r.__importDefault(n(35726)),o=n(53433),a=r.__importDefault(n(48889)),s=n(57411),u=function(){function e(){}return e.doFetchPersistedQuery=function(e,t,n,u,c){return r.__awaiter(this,void 0,void 0,(function(){var d,l;return r.__generator(this,(function(r){switch(r.label){case 0:return u=null!==u&&void 0!==u?u:3e4,d=function(e){return s.operationsToBFF.checkoutBFFOperations.includes(e)?o.checkoutBffInternalUrl:o.digitalPricingBffInternalUrl}(e),l=this.getHeaders(t),c=void 0===c||c,[4,a.default.request({url:d,method:"POST",data:JSON.stringify({operationName:e,variables:n}),timeout:u,headers:l,withCredentials:!1}).catch((function(n){return i.default.handleException(n,e,c,t)}))];case 1:return[2,r.sent()]}}))}))},e.getHeaders=function(e){var t=e.loadTest,n=e.passport,r=e.pageUrl;return{"content-type":"application/json;charset=UTF-8",Accept:"application/json","X-LoadTests":t||"","CHEGG-PASSPORT":n||"",cookie:e.cookie||"","X-CHEGG-PAGE-URL":r||""}},e}();t.default=u},76196:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logErrorToNR=void 0;var r=n(85556).__importDefault(n(9471)),i=n(49445);t.logErrorToNR=function(e,t){r.default.logError({component:"Pricing-SDK",componentVersion:i.version,errorMessage:JSON.stringify(e),additional:"Error Decorate Promise"},t)}},98557:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.environment=t.commerceErrorUrl=t.dcoUrl=t.commerceDataAggregatorUrl=void 0;var i=n(85556),o=i.__importDefault(n(16321)),a=i.__importDefault(n(8726));t.commerceDataAggregatorUrl="/checkout/_ajax/commercedataaggregator/v2",t.dcoUrl="/placeorder",t.commerceErrorUrl="/checkout/_ajax/commerceerrors";var s=null!==(r="prod")?r:"development";t.environment=["production","test","development"].includes(s)?s:"development",t.default="production"===t.environment?o.default:a.default},36098:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85556),i=n(53433),o=r.__importDefault(n(56633)),a=r.__importDefault(n(20145)),s=r.__importDefault(n(80939)),u={authorize:i.authorize,pricingApi:o.default,checkoutUrlBuilderApi:a.default,nextInteractionApi:s.default};t.default=u},49445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlType=t.LoggedInState=t.PageContext=t.IntendedActions=t.Commands=t.deriveProductName=t.OrderStates=t.ItemType=t.Interactions=t.ProductType=t.ProductName=t.ErrorType=t.client=t.version=void 0;var r=n(85556).__importDefault(n(36098));t.client=r.default;t.version="3.5.0";var i=n(11905);Object.defineProperty(t,"ErrorType",{enumerable:!0,get:function(){return i.ErrorType}}),Object.defineProperty(t,"ProductName",{enumerable:!0,get:function(){return i.ProductName}}),Object.defineProperty(t,"ProductType",{enumerable:!0,get:function(){return i.ProductType}}),Object.defineProperty(t,"Interactions",{enumerable:!0,get:function(){return i.Interactions}}),Object.defineProperty(t,"ItemType",{enumerable:!0,get:function(){return i.ItemType}}),Object.defineProperty(t,"OrderStates",{enumerable:!0,get:function(){return i.OrderStates}});var o=n(85347);Object.defineProperty(t,"deriveProductName",{enumerable:!0,get:function(){return o.deriveProductName}});var a=n(16546);Object.defineProperty(t,"Commands",{enumerable:!0,get:function(){return a.Commands}}),Object.defineProperty(t,"IntendedActions",{enumerable:!0,get:function(){return a.IntendedActions}}),Object.defineProperty(t,"PageContext",{enumerable:!0,get:function(){return a.PageContext}});var s=n(10530);Object.defineProperty(t,"LoggedInState",{enumerable:!0,get:function(){return s.LoggedInState}});var u=n(74125);Object.defineProperty(t,"UrlType",{enumerable:!0,get:function(){return u.UrlType}})},8411:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BFF_INTERNAL_TEST_URL=t.BFF_INTERNAL_PRODUCTION_URL=t.BFF_GATEWAY_TEST_URL=t.BFF_GATEWAY_PRODUCTION_URL=t.AuthorizeErrors=void 0;var r=n(11905);t.AuthorizeErrors={MISSING_API_KEY:{code:"PSDK-001",message:"Api key is required",type:r.ErrorType.AUTHORIZATION},AUTHORIZE_FAILURE:{code:"PSDK-002",message:"Authorization Failure",type:r.ErrorType.AUTHORIZATION},UNKNOWN_FAILURE:{code:"PSDK-000",message:"Unknown api failure",type:r.ErrorType.SERVER},BAD_REQUEST:{code:"PSDK-003",message:"Bad Request",type:r.ErrorType.SERVER}},t.BFF_GATEWAY_PRODUCTION_URL="https://gateway.chegg.com/",t.BFF_GATEWAY_TEST_URL="https://gateway.test.cheggnet.com/",t.BFF_INTERNAL_PRODUCTION_URL="http://digital-pricing-bff.prod.commerce.chegg.services/graphql",t.BFF_INTERNAL_TEST_URL="http://digital-pricing-bff.test.commerce.chegg.services/graphql"},53433:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultInternalGraphQLUrl=t.defaultGraphQLUrl=t.authorize=t.endgameExperimentAllocation=t.cheggDigitalPricingBFFGraphQLUrl=t.checkoutBffInternalUrl=t.digitalPricingBffInternalUrl=t.cheggCheckoutBffGraphQLUrl=t.cheggGraphQLUrl=t.cheggOrigin=t.cheggBaseUrl=t.authorizeParams=void 0;var r=n(85556),i=n(8411);t.authorize=function(e){var n,o;return e.apiKey?(e.bffKey=null!==(n=e.bffKey)&&void 0!==n?n:e.apiKey,t.authorizeParams=r.__assign(r.__assign({},e),!e.csrfToken&&{noCookie:1}),t.cheggBaseUrl=e.cheggBaseUrl||"",t.cheggGraphQLUrl=e.cheggGraphQLUrl&&e.cheggGraphQLUrl.replace(/\.com.*/,".com/")||(0,t.defaultGraphQLUrl)(t.cheggBaseUrl),t.digitalPricingBffInternalUrl=e.internalGraphQLUrl||(0,t.defaultInternalGraphQLUrl)(t.cheggBaseUrl),t.checkoutBffInternalUrl=t.digitalPricingBffInternalUrl?t.digitalPricingBffInternalUrl.replace("digital-pricing-bff","checkout-bff"):t.checkoutBffInternalUrl,t.cheggDigitalPricingBFFGraphQLUrl="".concat(t.cheggGraphQLUrl,"digital-pricing-bff/graphql"),t.cheggCheckoutBffGraphQLUrl="".concat(t.cheggGraphQLUrl,"checkout-bff/graphql"),t.cheggOrigin=null!==(o=e.origin)&&void 0!==o?o:"",t.endgameExperimentAllocation=e.endgameExperimentAllocation||"phase2",{success:!0,data:{},errors:null}):{data:{},errors:[i.AuthorizeErrors.MISSING_API_KEY],success:!1}};t.defaultGraphQLUrl=function(e){return e.match(/^http[s]?:\/\/[a-zA-Z0-9.-]*chegg.com((:[0-9]+)?\/?)?$/)?i.BFF_GATEWAY_PRODUCTION_URL:i.BFF_GATEWAY_TEST_URL};t.defaultInternalGraphQLUrl=function(e){return e.match(/^http[s]?:\/\/[a-zA-Z0-9.-]*chegg.com((:[0-9]+)?\/?)?$/)?i.BFF_INTERNAL_PRODUCTION_URL:i.BFF_INTERNAL_TEST_URL}},10530:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggedInState=void 0,function(e){e.SOFT="soft",e.HARD="hard",e.LOGGED_OUT="logged_out",e.NONE=""}(t.LoggedInState||(t.LoggedInState={}))},47399:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHECKOUT_FLOW_TYPE=t.CATALOG_ITEM_SOURCE=t.ITEM_QUANTITY=void 0,t.ITEM_QUANTITY=1,t.CATALOG_ITEM_SOURCE="NETSUITE",t.CHECKOUT_FLOW_TYPE="SINGLE_ITEM_PURCHASE"},20145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCheckoutPayloadFromShortenerId=t.getShortenedCheckoutUrl=t.prepareFullCheckoutPayload=void 0;var r=n(85556),i=r.__importDefault(n(35726)),o=n(98557),a=n(8411),s=n(11905),u=n(16546),c=n(47399),d=n(74125),l=r.__importDefault(n(35574));function _(e){var t=e.hostAnnotations,n=e.items.map((function(e){return r.__assign({catalogItemSource:c.CATALOG_ITEM_SOURCE,quantity:c.ITEM_QUANTITY},e)})),i=r.__assign({isInApp:!1,orderPlacedOn:"Web"},t);return r.__assign(r.__assign({},e),{items:n,hostAnnotations:i})}function g(e){var t=e.productType,n=e.bundle,i=r.__rest(e,["productType","bundle"]),a="".concat(o.dcoUrl,"?productType=").concat(t)+"&checkoutFlowType=".concat(c.CHECKOUT_FLOW_TYPE)+"&data=".concat(l.default.encode(JSON.stringify(i)))+"&version=1";return n&&(a+="&bundle=".concat(n)),Promise.resolve({success:!0,data:{url:a},errors:null})}function p(e,t){return void 0===t&&(t={timeout:u.PRICING_TIMEOUT}),r.__awaiter(this,void 0,void 0,(function(){var n,a,s,u;return r.__generator(this,(function(c){return n=e.productType,a=e.bundle,s=r.__rest(e,["productType","bundle"]),u={payload:JSON.stringify(s),dataRequested:"getShortenerPayloadId"},[2,I(i.default.doPostRequestToChegg(o.commerceDataAggregatorUrl,u,null,t.timeout),{productType:n,bundle:a})]}))}))}function E(e,t){return void 0===t&&(t={timeout:u.PRICING_TIMEOUT}),r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){return n={payloadId:e.id,dataRequested:"getShortenerPayload"},[2,I(i.default.doPostRequestToChegg(o.commerceDataAggregatorUrl,n,null,t.timeout))]}))}))}function I(e,t){return e.then((function(e){var n=e.data.shortener,i=n.data,o=n.message,a=n.error;return a||o||!i?{success:!1,data:null,errors:[{message:o,code:a,type:s.ErrorType.SERVER}]}:{success:!0,data:f(r.__assign(r.__assign({},i),t&&r.__assign({},t))),errors:null}})).catch((function(e){return{errors:[void 0!==a.AuthorizeErrors[e.message]?a.AuthorizeErrors[e.message]:a.AuthorizeErrors.UNKNOWN_FAILURE],data:null}}))}function f(e){if("id"in e){var t=e,n=t.id,r=t.productType,i=t.bundle,a="".concat(o.dcoUrl,"?productType=").concat(r,"&checkoutFlowType=").concat(c.CHECKOUT_FLOW_TYPE,"&id=").concat(n,"&version=2");return i&&(a+="&bundle=".concat(i)),{url:a}}return{payload:e.payload}}t.prepareFullCheckoutPayload=_,t.getShortenedCheckoutUrl=p,t.getCheckoutPayloadFromShortenerId=E;var v={getCheckoutUrl:function(e,t){var n=e.urlType,i=void 0===n?d.UrlType.BASE_64_ENCODED:n,o=r.__rest(e,["urlType"]);return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){return e=_(o),i===d.UrlType.SHORTENED?[2,p(e,t)]:[2,g(e)]}))}))},getCheckoutPayloadFromShortenerId:E};t.default=v},74125:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlType=void 0,function(e){e.BASE_64_ENCODED="BASE_64_ENCODED",e.SHORTENED="SHORTENED"}(t.UrlType||(t.UrlType={}))},85347:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deriveProductName=t.isOrderManagementAction=t.processBFFDataRequested=t.createErrorObject=t.graphRequestToCheggResponse=t.sendBFFCall=void 0;var r=n(85556),i=r.__importDefault(n(57411)),o=r.__importDefault(n(91302)),a=n(8411),s=n(11905);function u(e,t,n){return e.then((function(e){var i,o,u,c,d,l,_=e.data,g=_.data,p=_.errors,E=!0,I=null;if(g)if(s.SKIP_OPERATION_NAME_CHECK.includes(t))I=g;else if(g[t])I=g[t];else if(n)try{for(var f=r.__values(n),v=f.next();!v.done;v=f.next()){var h=v.value;g[h]&&(I=g[h])}}catch(O){i={error:O}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}if(p){var T=a.AuthorizeErrors.UNKNOWN_FAILURE;try{for(var A=r.__values(p),P=A.next();!P.done;P=A.next()){var R=P.value,m=null!==(l=null===(d=R.extensions)||void 0===d?void 0:d.code)&&void 0!==l?l:"";if(m in s.GRAPHQL_AUTHENTICATION_ERRORS){(T=a.AuthorizeErrors.AUTHORIZE_FAILURE).originalError=R;break}if(m in s.GRAPHQL_BAD_REQUEST_ERRORS){(T=a.AuthorizeErrors.BAD_REQUEST).originalError=R;break}(T=a.AuthorizeErrors.UNKNOWN_FAILURE).originalError=R}}catch(y){u={error:y}}finally{try{P&&!P.done&&(c=A.return)&&c.call(A)}finally{if(u)throw u.error}}p=[T],E=!1}var C={data:I,errors:p||null,success:E};if(!E)throw new Error(JSON.stringify(C));return C}))}t.sendBFFCall=function(e,t,n,r,a,s,c){var d;return d=s&&s.isInternal?o.default.doFetchPersistedQuery(e,s,t,a,c).then((function(e){return e})):i.default.doFetchPersistedQuery(e,t,a,c).then((function(e){return e})),n?n(u(d,e,r)):u(d,e,r)},t.graphRequestToCheggResponse=u,t.createErrorObject=function(e,t){return[{code:e,message:t,type:s.ErrorType.SERVER}]},t.processBFFDataRequested=function(e){var t=[],n=[];return e.split(",").forEach((function(e){(e=e.toLowerCase()).includes("eligibility")&&t.push("eligibility"),e.includes("vpn")&&t.push("vpnCheck"),e.includes("orderdetails")&&(t.push("orderDetails"),e.includes("pendingcancel")&&n.push(s.OrderStates.PENDING_CANCEL),e.includes("paused")&&n.push(s.OrderStates.PAUSED),e.includes("pendingpause")&&n.push(s.OrderStates.PENDING_PAUSE),e.includes("allstate")&&n.push(s.OrderStates.PENDING_PAUSE,s.OrderStates.PAUSED,s.OrderStates.PENDING_CANCEL)),e.includes("mopdetails")&&t.push("mopDetails"),e.includes("tax")&&t.push("tax"),e.includes("authstate")&&t.push("getAuthState")})),{dataRequested:t.join(","),desiredOrderStatuses:n}};t.isOrderManagementAction=function(e){return e.filter((function(e){return["REVOKE_PENDING_CANCEL","REVOKE_PENDING_PAUSE","RESUME"].includes(e)})).length>0};t.deriveProductName=function(e){var t=e;return e.toString()===s.ProductType.CHEGG_STUDY_PACK&&(t=s.ProductName.CHEGG_STUDY_PACK),t}},11905:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SKIP_OPERATION_NAME_CHECK=t.OrderStates=t.Interactions=t.ItemType=t.ProductType=t.ProductName=t.GRAPHQL_AUTHENTICATION_ERRORS=t.GRAPHQL_BAD_REQUEST_ERRORS=t.Level=t.GraphQLOperations=t.ErrorType=void 0,function(e){e.SERVER="server",e.AUTHORIZATION="auth",e.INLINE="inline"}(t.ErrorType||(t.ErrorType={})),function(e){e.GET_PRICING="getPricingByExternalId_external",e.GET_PRICING_V2="getPricingV2_external",e.GET_PRICING_BY_EXTERNALID="getPricingByExternalId_external",e.GET_ORDER_DETAILS="getNextInteraction_orderDetails",e.GET_MOP_DETAILS="getNextInteraction_mopDetails",e.GET_TAX_QUOTE="getNextInteraction_taxQuote",e.GET_AUTH_STATE="getNextInteraction_authState",e.NONE="none"}(n=t.GraphQLOperations||(t.GraphQLOperations={})),function(e){e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.FATAL="FATAL"}(t.Level||(t.Level={})),function(e){e.GRAPHQL_PARSE_FAILED="GRAPHQL_PARSE_FAILED",e.GRAPHQL_VALIDATION_FAILED="GRAPHQL_VALIDATION_FAILED",e.BAD_USER_INPUT="BAD_USER_INPUT"}(t.GRAPHQL_BAD_REQUEST_ERRORS||(t.GRAPHQL_BAD_REQUEST_ERRORS={})),function(e){e.FORBIDDEN="FORBIDDEN",e.UNAUTHENTICATED="UNAUTHENTICATED"}(t.GRAPHQL_AUTHENTICATION_ERRORS||(t.GRAPHQL_AUTHENTICATION_ERRORS={})),function(e){e.CHEGG_STUDY="CHEGG_STUDY",e.CHEGG_MATH="CHEGG_MATH",e.CHEGG_STUDY_PACK="CHEGG_STUDY_PACK"}(t.ProductName||(t.ProductName={})),function(e){e.CHEGG_STUDY="CHEGG_STUDY",e.CHEGG_STUDY_PACK="BUNDLE",e.WRITING_TOOLS="EASYBIB",e.CHEGG_MATH="CHEGG_MATH",e.MATHWAY="MATHWAY"}(t.ProductType||(t.ProductType={})),function(e){e.RECURRING_BUNDLE="RECURRING_BUNDLE_ITEM",e.RECURRING_SINGLE_ITEM="FIXED_RECURRING_ITEM"}(t.ItemType||(t.ItemType={})),function(e){e.DEFAULT_CHECKOUT="DCO",e.ERROR="ERROR",e.DCO_1_CLICK="1CLICK",e.DCO_1_CLICK_NO_PRIOR_ORDER="1CLICK_NO_PRIOR_ORDER",e.OTHER="OTHER"}(t.Interactions||(t.Interactions={})),function(e){e.CANCELLED="cancelled",e.PAUSED="paused",e.PENDING_PAUSE="pendingPause",e.PENDING_CANCEL="pendingCancel",e.ACTIVE="active"}(t.OrderStates||(t.OrderStates={})),t.SKIP_OPERATION_NAME_CHECK=[n.GET_PRICING_BY_EXTERNALID.toString(),n.GET_PRICING_V2.toString(),n.GET_AUTH_STATE.toString(),n.GET_MOP_DETAILS.toString(),n.GET_ORDER_DETAILS.toString(),n.GET_TAX_QUOTE.toString()]},66361:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logError_bff=void 0;var r=n(85556),i=n(53433),o=n(85347),a=n(9471),s=n(53433);t.logError_bff=function(e,t){var n=(0,a.getRefererUrl)(null===t||void 0===t?void 0:t.pageUrl),u="Order Placed successfully"===e.errorMessage?"SUCCESS":"FAILURE";u=e.nrEventType?e.nrEventType:u;var c={input:{fields:r.__assign(r.__assign({},e),{applicationKey:i.authorizeParams.apiKey,refererUrl:n,endgameExperimentAllocation:s.endgameExperimentAllocation}),eventType:u}};try{(0,o.sendBFFCall)("logFECheckoutEvent",c,void 0,void 0,void 0,t,!1)}catch(d){return}return!0}},9471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRefererUrl=void 0;var r=n(20751),i=n(66361);t.getRefererUrl=function(e){return window&&window.location?window.location.href:e||"unknown"};var o=(0,r.getModules)({logError:{bffFn:i.logError_bff}});t.default=o},21834:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.determineApiCommandsNeeded=t.isVPNFraudCheckRequired=t.redefineRequestItems=t.getDefaultResponse=t.fetchVpnFraudItem=t.fetchRedefinedItems=t.getPricePlanResponse=t.isPricePlanRequest=t.getResponseWithPricingData=t.getNextInteraction_bff=void 0;var r=n(85556),i=n(4116),o=n(80939),a=n(85347),s=n(11905),u=n(16546),c=r.__importDefault(n(56633));function d(e,t){var n=t.nextInteractionRequest,i=t.userGeolocation,a=t.authorizeParams,u=A(n,{}).data,c=n.finalActions,d=u.interaction==s.Interactions.ERROR.toString();return(0,o.createNextInteractionPayload)({data:d?null:r.__assign(r.__assign({},u),{action:c&&c.length&&c[0]||"",uuid:e.pricingData.authState.uuid,loginState:e.pricingData.authState.state}),errors:null,success:!d},r.__assign(r.__assign({},e),{authorizeParams:a,userGeolocation:i}))}function l(e,t,n){var i=n.products,a=n.authorizeParams,s=n.userGeolocation,u=n.apiResponse,c=A(t,u).data;e.pricingData=u.data;var d=e.pricingData||{},l=d.eligibility,_=d.authState,g=(l||{}).annotation,p=r.__assign(r.__assign(r.__assign({},_),{action:""}),c);return i=(null===i||void 0===i?void 0:i.length)?i:[e.pricingData],(0,o.createNextInteractionPayload)({data:p,errors:null},r.__assign(r.__assign({},e),{itemAnnotations:g||{},authorizeParams:a,userGeolocation:s,products:i}))}function _(e){var t=e.finalAction,n=e.pricePlanSelection,r=e.pricingData.eligibility.finalActions,i=t&&[t]||r||[];return!!(n&&[u.IntendedActions.JOIN.toString(),u.IntendedActions.RESUBSCRIBE.toString(),u.IntendedActions.DOWNGRADE.toString(),u.IntendedActions.UPGRADE.toString()].filter((function(e){return i.includes(e)})).length>0)}function g(e,t,n){var i=n.vpnCheckRequired;return r.__awaiter(this,void 0,void 0,(function(){var n,o,a,u,_,g,p,E,I,f;return r.__generator(this,(function(v){switch(v.label){case 0:return o=function(e){var t,n,i=s.GraphQLOperations.NONE,o=e.finalAction,a=(e.pricePlanSelection||{}).externalId,u=e.userGeolocation,c=e.authorizeParams,d=e.pricingData,l=d.productFamily,_=d.countryCode,g=d.eligibility,p=g.finalActions,E=g.pricePlans,I=(null===(n=null===(t=null===E||void 0===E?void 0:E.quoteItems)||void 0===t?void 0:t.priceQuoteItems)||void 0===n?void 0:n.filter((function(e){return e.itemDetails.externalId===a})).pop())||{itemDetails:{},pricingKey:{}},f=I.itemDetails.externalId,v=I.pricingKey.experimentId;f&&(i=s.GraphQLOperations.GET_PRICING_BY_EXTERNALID);var T=h(e);return{operationName:i,request:{itemId:f,experiment:v,productCode:l,countryCode:_,dataRequested:"eligibility,tax",IntendedActions:[o],billing:T},userGeolocation:u||{countryCode:T.country},nextInteractionRequest:r.__assign({},i!==s.GraphQLOperations.NONE?{interactions:e.interactions,finalActions:p}:{interactions:[s.Interactions.ERROR],finalActions:[]}),authorizeParams:c}}(e),a=o.operationName,u=o.request,_=o.nextInteractionRequest,g=o.userGeolocation,p=o.authorizeParams,a==s.GraphQLOperations.NONE?[2,Promise.resolve(d(e,{nextInteractionRequest:_,userGeolocation:g,authorizeParams:p}))]:(u.dataRequested=i?"".concat(u.dataRequested,",vpnCheck"):u.dataRequested,[4,c.default.getPricingByExternalId(u,t)]);case 1:return n=v.sent(),E=n.data,I=n.success,f=n.errors,I&&E?[2,l(e,_,{authorizeParams:p,userGeolocation:g,apiResponse:n})]:[2,{success:I,errors:f,data:null}]}}))}))}function p(e,t,n){var i=n.redefineItems,o=n.billing;return r.__awaiter(this,void 0,void 0,(function(){var n,a,s,u,d,l;return r.__generator(this,(function(_){switch(_.label){case 0:return[4,Promise.all(i.map((function(e){return c.default.getPricingV2(r.__assign(r.__assign({},e),{billing:o}),t)})))];case 1:return a=_.sent(),s=a.map((function(e){var t=e.success,n=e.data;return t?n:null})),s.length==s.filter((function(e){return null!=e})).length?(n=s,u=e.pricingData.productFamily,d=n.filter((function(e){return e.productFamily.toString()===u.toString()})),d.length&&(e.pricingData=d[0]),l=n.filter((function(e){var t,n,r,i=e.eligibility;return i.eligible&&(null===(r=null===(n=null===(t=i.pricePlans)||void 0===t?void 0:t.quoteItems)||void 0===n?void 0:n.priceQuoteItems)||void 0===r?void 0:r.length)})),[2,l]):[2,Promise.resolve([])]}}))}))}function E(e,t,n){var i=n.nextInteractionRequest,o=n.authorizeParams,a=n.userGeolocation,s=n.billing;return r.__awaiter(this,void 0,void 0,(function(){var n,d,_,g,p,E,I,f,v;return r.__generator(this,(function(r){switch(r.label){case 0:return n=e.pricingData,d=n.productFamily,_=n.offerId,g=n.countryCode,p={countryCode:g,dataRequested:u.Commands.ELIGIBILITY_WITH_TAX_FRAUD,productCode:d,offerId:_,billing:s},[4,c.default.getPricingV2(p,t)];case 1:return E=r.sent(),I=E.success,f=E.errors,v=E.data,I&&v?[2,l(e,i,{authorizeParams:o,userGeolocation:a,apiResponse:E})]:(e.pricingData.networkInfo={isAnonymous:!1},[2,{success:I,errors:f,data:null}])}}))}))}function I(e,t,n){var i,u=n.vpnCheckRequired,c=n.internalRequestPayload;return r.__awaiter(this,void 0,void 0,(function(){var n,_,g,I,v,P,m,C,O,y,N;return r.__generator(this,(function(D){switch(D.label){case 0:return _=function(e){var t,n,r,i,o,u,c,d=e.userGeolocation,l=e.authorizeParams,_=e.pricingData.eligibility.order,g=e.pricingData.eligibility.price,p=h(e),E=R(e,!0),I=E.join(","),f=(0,a.processBFFDataRequested)(I),v=f.dataRequested,T=s.GraphQLOperations.GET_AUTH_STATE,A=null===(t=null===_||void 0===_?void 0:_.paymentMethod)||void 0===t?void 0:t.id,P=null===(n=null===_||void 0===_?void 0:_.lineItem)||void 0===n?void 0:n.orderUuid,m=null===(r=null===_||void 0===_?void 0:_.lineItem)||void 0===r?void 0:r.id,C=null===(i=null===_||void 0===_?void 0:_.lineItem)||void 0===i?void 0:i.status,O=null===(o=null===_||void 0===_?void 0:_.lineItem)||void 0===o?void 0:o.itemType,y=p,N=null===g||void 0===g?void 0:g.currency,D=null===g||void 0===g?void 0:g.itemDetails.taxProductClass,S=null===g||void 0===g?void 0:g.price,U=null===(u=null===_||void 0===_?void 0:_.mopDetails)||void 0===u?void 0:u.inApp,G=null===(c=null===_||void 0===_?void 0:_.mopDetails)||void 0===c?void 0:c.active,L=e.pricingData.eligibility.finalActions;v.includes("orderDetails")?(T=s.GraphQLOperations.GET_ORDER_DETAILS,f={dataRequested:v,input:{lineId:m,orderStatus:C,itemType:O,desiredOrderStatuses:f.desiredOrderStatuses}}):v.includes("mopDetails")?(T=s.GraphQLOperations.GET_MOP_DETAILS,f={dataRequested:f.dataRequested,input:{mopId:A}}):v.includes("tax")?(T=s.GraphQLOperations.GET_TAX_QUOTE,f={dataRequested:v,input:{billing:y,currency:N,taxProductClass:D,price:S}}):f={dataRequested:v};return{operationName:0==E.length?s.GraphQLOperations.NONE:T,request:f,userGeolocation:d||{countryCode:p.country},nextInteractionRequest:{interactions:e.interactions,mopId:A,orderUuid:P,lineId:m,orderStatus:C,itemType:O,inApp:U,active:G,finalActions:L},authorizeParams:l}}(e),g=_.operationName,I=_.request,v=_.nextInteractionRequest,P=_.userGeolocation,m=_.authorizeParams,C=f(e),O=(null===(i=null===I||void 0===I?void 0:I.input)||void 0===i?void 0:i.billing)||{country:P.countryCode},(null===C||void 0===C?void 0:C.length)?[4,p(e,t,{billing:O,redefineItems:C})]:[3,2];case 1:return(y=D.sent()).length?[2,l(e,v,{authorizeParams:m,userGeolocation:P,apiResponse:{data:e.pricingData,success:!0},products:y})]:[3,4];case 2:return u?[4,E(e,t,{billing:O,authorizeParams:m,userGeolocation:P,nextInteractionRequest:v})]:[3,4];case 3:if((n=D.sent()).success&&n.data)return[2,n];D.label=4;case 4:return g==s.GraphQLOperations.NONE?[2,Promise.resolve(d(e,{nextInteractionRequest:v,userGeolocation:P,authorizeParams:m}))]:[4,(0,a.sendBFFCall)(g,I,T,void 0,t.timeout,c).catch((function(e){return JSON.parse(e.message)}))];case 5:return(n=D.sent()).success?(N=A(v,n).data,n.data=r.__assign(r.__assign({},n.data),N),[2,(0,o.createNextInteractionPayload)(n,r.__assign(r.__assign({},e),{authorizeParams:m,userGeolocation:P,products:[e.pricingData]}))]):[2,n]}}))}))}function f(e,t,n,i){void 0===t&&(t=[s.ProductType.CHEGG_STUDY,s.ProductType.CHEGG_STUDY_PACK]),void 0===n&&(n=[u.IntendedActions.RESUBSCRIBE]),void 0===i&&(i=[{productCode:s.ProductType.CHEGG_STUDY_PACK,offerId:["CS_SUB","EB_SUB","MATH_SUB"]}]);var o=e.pricingData,a=o.productFamily,c=o.offerId,d=o.countryCode,l=o.eligibility.finalActions,_=o.networkInfo,g=(null===l||void 0===l?void 0:l.filter((function(e){return n.map((function(e){return e.toString()})).includes(e)})))||[];if(t.map((function(e){return e.toString()})).includes(a.toString())&&g.length>0&&("US"===d.toUpperCase()||(null===_||void 0===_?void 0:_.isAnonymous))){var p={pricePlanInput:{pageContext:"".concat(a.toString().toLowerCase(),"-").concat(g[0].toLowerCase())},countryCode:d,dataRequested:u.Commands.ELIGIBILITY_WITH_TAX_FRAUD},E={productCode:a,offerId:(null===c||void 0===c?void 0:c.length)?c:{CHEGG_STUDY:["CS_SUB_V2"],BUNDLE:["CS_SUB","EB_SUB","MATH_SUB"]}[a.toString()]};return 0===i.filter((function(e){return e.productCode.toString()==E.productCode.toString()})).length&&i.push(E),i.map((function(e){return r.__assign(r.__assign({},p),e)}))}}function v(e,t){void 0===t&&(t=[s.ProductType.CHEGG_STUDY,s.ProductType.CHEGG_STUDY_PACK]);var n=e.pricingData,r=n.networkInfo,i=n.productFamily,o=n.countryCode,a=n.eligibility.finalActions;return!!((null===r||void 0===r?void 0:r.isAnonymous)&&t.map((function(e){return e.toString()})).includes(i.toString())&&P(a||[])&&"US"!==o.toUpperCase())}function h(e){var t=e.userGeolocation,n=e.pricingData.countryCode;return(null===t||void 0===t?void 0:t.countryCode)?{country:t.countryCode,city:null===t||void 0===t?void 0:t.city,state:null===t||void 0===t?void 0:t.region,postalCode:null===t||void 0===t?void 0:t.postalCode}:{country:n||"US"}}function T(e){return e.then((function(e){var t=e.data,n=t.getAuthState,i=t.getOrderDetails,o=t.getMopDetails,a=t.getTaxQuote;return{data:r.__assign(r.__assign(r.__assign(r.__assign({},n),i&&{orderDetails:i}),o&&{mopDetails:o}||(null===i||void 0===i?void 0:i.mopDetails)&&{mopDetails:i.mopDetails}),a&&{taxInfo:a}),errors:null,success:!0}}))}function A(e,t){var n,i=r.__assign(r.__assign({},e),null===(n=t.data)||void 0===n?void 0:n.mopDetails),o=i.finalActions,u=i.orderStatus,c=i.interactions,d=i.paymentAccountType,l=i.itemType,_=(0,a.isOrderManagementAction)(o),g=["cancelled"].includes(u)||l&&"subscription"===l.toLowerCase(),p=o.includes("UPGRADE")||o.includes("DOWNGRADE"),E=(null===u||void 0===u?void 0:u.toUpperCase())||"NO_PREV_ORDER",I=P(o)&&(c.includes(s.Interactions.DEFAULT_CHECKOUT.toString())||c.includes(s.Interactions.OTHER.toString()))?s.Interactions.DEFAULT_CHECKOUT.toString():s.Interactions.ERROR.toString();return c.length>0&&(c.includes(s.Interactions.DCO_1_CLICK)||c.includes(s.Interactions.DCO_1_CLICK_NO_PRIOR_ORDER))&&(_||g||c.includes("1CLICK_NO_PRIOR_ORDER")||p)&&(I=c.includes(s.Interactions.DCO_1_CLICK_NO_PRIOR_ORDER.toString())?s.Interactions.DCO_1_CLICK_NO_PRIOR_ORDER.toString():s.Interactions.DCO_1_CLICK.toString(),E=u||"NO_PREV_ORDER"),{data:{interaction:I,reason:E,mopType:d},error:null,message:null}}t.getNextInteraction_bff=function(e,t){return void 0===t&&(t={timeout:i.PRICING_TIMEOUT}),r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){return n=e.internalRequestPayload,delete e.internalRequestPayload,i=v(e),_(e)?[2,g(e,t,{vpnCheckRequired:i})]:[2,I(e,t,{vpnCheckRequired:i,internalRequestPayload:n})]}))}))},t.getResponseWithPricingData=l,t.isPricePlanRequest=_,t.getPricePlanResponse=g,t.fetchRedefinedItems=p,t.fetchVpnFraudItem=E,t.getDefaultResponse=I,t.redefineRequestItems=f,t.isVPNFraudCheckRequired=v;var P=function(e){return e.filter((function(e){return["JOIN","RESUBSCRIBE","UPGRADE","DOWNGRADE"].includes(e)})).length>0};function R(e,t){var n,r,o=[],u=e.finalAction,c=e.pricingData,d=c.eligibility,l=d.order,_=d.finalActions,g=d.price,p=c.taxInfo,E=c.price,I=u&&[u]||_||[];if(0==I.length||!e.interactions.some((function(e){return[s.Interactions.DCO_1_CLICK,s.Interactions.DCO_1_CLICK_NO_PRIOR_ORDER].includes(e)})))return[];if(o.push(i.CdaCommands.GET_AUTH_STATE),l&&(0,a.isOrderManagementAction)(I)){var f=null===(n=null===l||void 0===l?void 0:l.lineItem)||void 0===n?void 0:n.status;f!=s.OrderStates.PENDING_CANCEL&&f!=s.OrderStates.PENDING_PAUSE&&f!=s.OrderStates.PAUSED||(l.details||(null===(r=l.lineItem)||void 0===r?void 0:r.details)||o.push(i.CdaCommands.ORDER_DETAILS_PAUSED_PENDINGPAUSE_PENDINGCANCEL),l.mopDetails||o.push(i.CdaCommands.MOP_DETAILS))}else p||!g&&!E||o.push(i.CdaCommands.GET_TAX_INFO);return o}t.determineApiCommandsNeeded=R},80939:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createItemPayload=t.createDCO1ClickPayload=t.createNextInteractionPayload=void 0;var r=n(85556),i=n(11905),o=r.__importDefault(n(20145)),a=n(21834),s=(0,n(20751).getModules)({getNextInteraction:{bffFn:a.getNextInteraction_bff}});function u(e,t){var n,r,i,o,a,s,u,d,l,_,g=t.pricingData,p=t.products,E=t.successUrl,I=t.errorUrl,f=t.authorizeParams,v=t.hostAnnotations,h=t.userGeolocation,T=g.eligibility,A=T.price,P=T.actions,R=T.currencyDetails,m=T.order,C=g.productFamily,O=g.externalId,y=g.taxInfo;return{eligibility:g,successUrl:E,errorUrl:I,productType:C,authorization:f,items:c(t),hostAnnotations:v,authState:null===(n=e.data)||void 0===n?void 0:n.state,externalId:null!==O&&void 0!==O?O:null===A||void 0===A?void 0:A.itemDetails.externalId,action:P?P[0]:"",price:A,currencyDetails:R,taxInfo:null!==y&&void 0!==y?y:null===(r=e.data)||void 0===r?void 0:r.taxInfo,orderLineId:null!==(o=null===(i=null===m||void 0===m?void 0:m.lineItem)||void 0===i?void 0:i.id)&&void 0!==o?o:"",mopDetails:null!==(a=null===m||void 0===m?void 0:m.mopDetails)&&void 0!==a?a:null===(s=e.data)||void 0===s?void 0:s.mopDetails,orderDetails:null!==(l=null!==(d=null===(u=null===m||void 0===m?void 0:m.lineItem)||void 0===u?void 0:u.details)&&void 0!==d?d:null===m||void 0===m?void 0:m.details)&&void 0!==l?l:null===(_=e.data)||void 0===_?void 0:_.orderDetails,userGeolocation:h,products:p}}function c(e){var t,n,i,o,a,s,u=e.pricingData,c=u.externalId,d=u.eligibility,l=d.annotation;return[{externalId:c,catalogItemId:null!==(n=null===(t=d.price)||void 0===t?void 0:t.itemDetails.id)&&void 0!==n?n:"",experiment:null!==(o=null===(i=d.price)||void 0===i?void 0:i.experiment)&&void 0!==o?o:"BASE",pricingId:null!==(s=null===(a=d.price)||void 0===a?void 0:a.pricingLogId)&&void 0!==s?s:"",productName:e.productName,annotation:r.__assign(r.__assign({},e.itemAnnotations),l),quantity:1}]}t.createNextInteractionPayload=function(e,t){var n,a,s,d;return r.__awaiter(this,void 0,void 0,(function(){var l,_,g,p,E;return r.__generator(this,(function(r){switch(r.label){case 0:if(!(null===(n=e.data)||void 0===n?void 0:n.interaction))return[3,11];l=void 0,_=void 0,r.label=1;case 1:switch(r.trys.push([1,10,,11]),null===(a=e.data)||void 0===a?void 0:a.interaction){case i.Interactions.DEFAULT_CHECKOUT:return[3,2];case i.Interactions.ERROR:return[3,6];case i.Interactions.DCO_1_CLICK_NO_PRIOR_ORDER:case i.Interactions.DCO_1_CLICK:return[3,7]}return[3,8];case 2:return(null===(s=t.interactions)||void 0===s?void 0:s.includes(i.Interactions.DEFAULT_CHECKOUT))?(g={successUrl:t.successUrl,errorUrl:t.errorUrl,items:c(t),hostAnnotations:t.hostAnnotations,productType:null!==(d=t.pricingData.productFamily)&&void 0!==d?d:""},[4,o.default.getCheckoutUrl(g).then((function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.url}))]):[3,4];case 3:return p=r.sent(),l={action:i.Interactions.DEFAULT_CHECKOUT,reason:e.data.reason,loginState:e.data.state,uuid:e.data.uuid,url:p},[3,5];case 4:l={action:i.Interactions.OTHER,reason:e.data.reason,loginState:e.data.state,uuid:e.data.uuid},r.label=5;case 5:return[3,9];case 6:return _=u(e,t),l={action:i.Interactions.DCO_1_CLICK,reason:e.data.reason,loginState:e.data.state,uuid:e.data.uuid,payload:_},[3,9];case 7:return _=u(e,t),l={action:e.data.interaction,reason:e.data.reason,loginState:e.data.state,uuid:e.data.uuid,payload:_},[3,9];case 8:return l={action:i.Interactions.OTHER,reason:"No DCO or DCO 1-click interaction"},[3,9];case 9:return[2,{data:l,success:!0,errors:null}];case 10:return E=r.sent(),[2,{data:{action:i.Interactions.OTHER,reason:"Error while computing interactions"},success:!1,errors:[E]}];case 11:return[2,{data:{action:i.Interactions.OTHER,reason:"NO_INTERACTION_FOUND"},success:!1,errors:[{message:"No Matching Interaction found",type:i.ErrorType.SERVER}]}]}}))}))},t.createDCO1ClickPayload=u,t.createItemPayload=c,t.default=s},4116:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PRICING_TIMEOUT=t.CdaCommands=void 0,function(e){e.GET_AUTH_STATE="getAuthState",e.MOP_DETAILS="mopDetails",e.ORDER_DETAILS_PAUSED_PENDING_CANCEL="withOrderDetailsPausedPendingCancelledState",e.DETERMINE_NEXT_INTERACTION="determineNextInteraction",e.GET_MOP_RESUBSCRIBE="getMopSummaryResubscribeState",e.ORDER_DETAILS_PAUSED_PENDINGPAUSE_PENDINGCANCEL="withOrderDetailsPausedPendingCancelPendingPauseState",e.MOST_RECENT_MOP="1Click",e.GET_TAX_INFO="getTaxQuote"}(t.CdaCommands||(t.CdaCommands={})),t.PRICING_TIMEOUT=1e4},59490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIntendedActions=t.getPricingByExternalId_bff=t.getPricingV2_bff=t.getPricing_bff=t.defaultIntendedActions=void 0;var r=n(85556),i=n(16546),o=n(11905),a=n(56633),s=n(85347),u=n(11905);function c(e){return e.then((function(e){var t,n=e.data,i=e.errors,o=e.success,a=n.getPricingV2||n.getPricingByExternalId,s=n.getAuthState,u=a.item,c=u.eligibility,d=u.externalId,l=a.countryCode,_=a.networkInfo,g=c.price,p=c.order,E=c.finalActions,I=c.currencyDetails;I&&"GBP"===I.currencyCode&&I.currencyName&&(I.currencyName+=" Sterling",c.currencyDetails=I);var f=(g||{}).taxQuote;if(g&&delete g.taxQuote,(null===p||void 0===p?void 0:p.lineItem)||(c.order=null),null===p||void 0===p?void 0:p.orderDetails){var v=p.orderDetails.paymentMethod;delete c.order.orderDetails.paymentMethod;var h=null!==(t=p.orderDetails.mopDetails)&&void 0!==t?t:null;delete c.order.orderDetails.mopDetails,c.order=r.__assign(r.__assign({},p),{details:p.orderDetails,paymentMethod:v,mopDetails:h}),delete c.order.orderDetails}else c.order&&delete c.order.orderDetails;return{data:r.__assign(r.__assign(r.__assign({authState:s,nextInteraction:null,countryCode:l,externalId:d,eligibility:c},n.getPricingV2&&{taxQuote:null}),f&&{taxInfo:f}),{actions:E.length>0&&E[0]||"",networkInfo:_}),errors:i,success:o}}))}function d(e){var n=e.intendedActions||r.__spreadArray([],r.__read(t.defaultIntendedActions),!1),a=e.openToUpgrade,s=e.orderStatuses;return a&&!n.includes(i.IntendedActions.UPGRADE)&&n.push(i.IntendedActions.UPGRADE),s.includes(o.OrderStates.PENDING_PAUSE)&&!n.includes(i.IntendedActions.REVOKE_PENDING_PAUSE)&&n.push(i.IntendedActions.REVOKE_PENDING_PAUSE),n}t.defaultIntendedActions=[i.IntendedActions.JOIN,i.IntendedActions.RESUBSCRIBE,i.IntendedActions.RESUME,i.IntendedActions.REVOKE_PENDING_CANCEL,i.IntendedActions.REVOKE_PENDING_PAUSE],t.getPricing_bff=function(e,n){return void 0===n&&(n={timeout:i.PRICING_TIMEOUT}),r.__awaiter(this,void 0,void 0,(function(){var o,d,l;return r.__generator(this,(function(_){switch(_.label){case 0:return o=e.internalRequestPayload,delete e.internalRequestPayload,e=(0,a.cleanInputExperiment)(e),d={input:r.__assign(r.__assign({},e),{countryCode:"US",intendedActions:r.__spreadArray([],r.__read(t.defaultIntendedActions),!1)}),dataRequested:i.Commands.ELIGIBILITY,desiredOrderStatuses:[],billing:{country:"US"}},[4,(0,s.sendBFFCall)(u.GraphQLOperations.GET_PRICING_BY_EXTERNALID,d,c,void 0,n.timeout,o).catch((function(e){return JSON.parse(e.message)}))];case 1:return(l=_.sent()).success&&(l.data=l.data.eligibility),[2,l]}}))}))},t.getPricingV2_bff=function(e,t){return void 0===t&&(t={timeout:i.PRICING_TIMEOUT}),r.__awaiter(this,void 0,void 0,(function(){var n,o,l,_,g,p,E,I,f,v,h,T,A,P;return r.__generator(this,(function(R){switch(R.label){case 0:return n=e.internalRequestPayload,o=e.pricePlanInput,delete e.pricePlanInput,delete e.internalRequestPayload,e=(0,a.cleanInputExperiment)(e),l=e.productCode,_=e.countryCode,g=e.offerId,p=e.experiment,E=e.dataRequested,I=e.openToUpgrade,f=e.intendedActions,v=e.billing,h=e.anonymous,T=(0,s.processBFFDataRequested)(E||i.Commands.ELIGIBILITY_V2),A=r.__assign(r.__assign(r.__assign({input:{anonymous:h||!1,countryCode:_,offerId:g,experiment:p,productCode:l,intendedActions:d({intendedActions:f,openToUpgrade:I,orderStatuses:T.desiredOrderStatuses})}},T),{billing:v||{country:_}}),o&&{pricePlanInput:o}),[4,(0,s.sendBFFCall)(u.GraphQLOperations.GET_PRICING_V2,A,c,void 0,t.timeout,n).catch((function(e){return JSON.parse(e.message)}))];case 1:return(P=R.sent()).success&&(P.data=r.__assign(r.__assign({},P.data),{productFamily:l,offerId:g})),[2,P]}}))}))},t.getPricingByExternalId_bff=function(e,t){var n,o;return void 0===t&&(t={timeout:i.PRICING_TIMEOUT}),r.__awaiter(this,void 0,void 0,(function(){var l,_,g,p,E,I,f,v,h,T,A,P,R,m;return r.__generator(this,(function(C){switch(C.label){case 0:return l=e.internalRequestPayload,_=e.pricePlanInput,delete e.internalRequestPayload,delete e.pricePlanInput,e=(0,a.cleanInputExperiment)(e),g=e.productCode,p=e.countryCode,E=e.experiment,I=e.itemId,f=e.dataRequested,v=e.billing,h=e.intendedActions,T=e.anonymous,A=(0,s.processBFFDataRequested)(f||i.Commands.ELIGIBILITY_PAUSED_PENDING_CANCEL),P=p||"US",R=r.__assign(r.__assign(r.__assign({input:{anonymous:T||!1,countryCode:P,itemId:I,experiment:E,productCode:g,intendedActions:d({intendedActions:h,orderStatuses:A.desiredOrderStatuses})}},A),{billing:v||{country:P}}),_&&{pricePlanInput:_}),[4,(0,s.sendBFFCall)(u.GraphQLOperations.GET_PRICING_BY_EXTERNALID,R,c,void 0,t.timeout,l).catch((function(e){return JSON.parse(e.message)}))];case 1:return(m=C.sent()).success&&(m.data=r.__assign(r.__assign({},m.data),{countryCode:(null===(n=m.data.getPricingByExternalId)||void 0===n?void 0:n.countryCode)||P,productFamily:g,externalId:(null===(o=m.data.getPricingByExternalId)||void 0===o?void 0:o.externalId)||I,offerId:[]})),[2,m]}}))}))},t.getIntendedActions=d},56633:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanInputExperiment=t.getAnonymousCall=void 0;var r=n(53433),i=n(59490),o=(0,n(20751).getModules)({getPricing:{bffFn:i.getPricing_bff},getPricingV2:{bffFn:i.getPricingV2_bff},getPricingByExternalId:{bffFn:i.getPricingByExternalId_bff}});t.getAnonymousCall=function(){return!!(null===r.authorizeParams||void 0===r.authorizeParams?void 0:r.authorizeParams.noCookie)&&!(null===r.authorizeParams||void 0===r.authorizeParams?void 0:r.authorizeParams.idToken)&&!(null===r.authorizeParams||void 0===r.authorizeParams?void 0:r.authorizeParams.accessToken)},t.cleanInputExperiment=function(e){var t;return e.experiment=(null===(t=e.experiment)||void 0===t?void 0:t.replace("|",","))||"",e},t.default=o},16546:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PRICING_TIMEOUT=t.IntendedActions=t.PageContext=t.Commands=void 0,function(e){e.ELIGIBILITY_V2="eligibilityV2",e.ELIGIBILITY="eligibility",e.ELIGIBILITY_WITH_AUTH_STATE="getAuthState,eligibility",e.ELIGIBILITY_WITH_TAX="eligibility,getTaxQuote",e.ELIGIBILITY_WITH_TAX_FRAUD="eligibility,vpnCheck,getTaxQuote",e.ELIGIBILITY_V2_PAUSED="eligibilityV2WithOrderDetailsPausedState",e.ELIGIBILITY_V2_PAUSED_PENDING_CANCEL="eligibilityV2WithOrderDetailsPausedPendingCancelState",e.GET_NEXT_INTERACTION="getAuthState,mopDetails,determineNextInteraction",e.ELIGIBILITY_V2_PENDING_PAUSE="eligibilityV2WithOrderDetailsPendingPauseState",e.ELIGIBILITY_PAUSED_PENDING_CANCEL="getAuthState,eligibility,withOrderDetailsPausedPendingCancelPendingPauseState,mopDetails,getTaxQuote",e.ELIGIBILIY_CANCELLED="getAuthState,eligibility,getMopSummaryResubscribeState",e.ELIGIBILITY_V2_ACTIVE_RENEWAL="eligibilityV2WithOrderDetailsActiveStates",e.ELIGIBILITY_V2_ALL_ORDER_DETAILS="eligibilityV2WithOrderDetailsAllStates",e.ELIGIBILITY_V2_WITH_TAX="eligibilityV2WithTax",e.ELIGIBILITY_V2_WITH_VPN="eligibilityV2,vpnCheck"}(t.Commands||(t.Commands={})),function(e){e.PRODUCT_PLAN="productPlan",e.CHEGG_STUDY_RESUBSCRIBE="chegg_study-resubscribe",e.BUNDLE_RESUBSCRIBE="bundle-resubscribe"}(t.PageContext||(t.PageContext={})),function(e){e.JOIN="JOIN",e.RESUME="RESUME",e.REVOKE_PENDING_PAUSE="REVOKE_PENDING_PAUSE",e.REVOKE_PENDING_CANCEL="REVOKE_PENDING_CANCEL",e.RESUBSCRIBE="RESUBSCRIBE",e.UPGRADE="UPGRADE",e.DOWNGRADE="DOWNGRADE"}(t.IntendedActions||(t.IntendedActions={})),t.PRICING_TIMEOUT=1e4},20751:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModules=void 0;var r=n(85556);t.getModules=function(e){var t,n,i={},o=function(e,t){var n=t.bffFn;i[e]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,n.apply(void 0,r.__spreadArray([],r.__read(e),!1))]}))}))}};try{for(var a=r.__values(Object.entries(e)),s=a.next();!s.done;s=a.next()){var u=r.__read(s.value,2);o(u[0],u[1])}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}},35574:function(e,t,n){var r;e=n.nmd(e),function(i){var o=t,a=(e&&e.exports,"object"==typeof n.g&&n.g);a.global!==a&&a.window;var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var u=function(e){throw new s(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=/[\t\n\f\r ]/g,l={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,i,o=e.length%3,a="",s=-1,d=e.length-o;++s<d;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,r=e.charCodeAt(++s),a+=c.charAt((i=t+n+r)>>18&63)+c.charAt(i>>12&63)+c.charAt(i>>6&63)+c.charAt(63&i);return 2==o?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),a+=c.charAt((i=t+n)>>10)+c.charAt(i>>4&63)+c.charAt(i<<2&63)+"="):1==o&&(i=e.charCodeAt(s),a+=c.charAt(i>>2)+c.charAt(i<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(d,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",a=-1;++a<t;)r=c.indexOf(e.charAt(a)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"1.0.0"};void 0===(r=function(){return l}.call(t,n,t,e))||(e.exports=r)}()},8726:function(e){"use strict";e.exports=JSON.parse('{"cheggBaseUrl":"https://trunk.live.test.cheggnet.com","graphBaseUrl":"https://gateway.test.cheggnet.com/digital-pricing-bff/graphql"}')},16321:function(e){"use strict";e.exports=JSON.parse('{"cheggBaseUrl":"https://www.chegg.com","graphBaseUrl":"https://gateway.chegg.com/digital-pricing-bff/graphql"}')}}]);
//# sourceMappingURL=85347-64f91edcd2cd98d0.js.map
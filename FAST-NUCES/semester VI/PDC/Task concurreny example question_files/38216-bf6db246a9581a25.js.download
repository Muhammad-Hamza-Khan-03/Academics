"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38216,86078],{4772:function(e,t,r){r.d(t,{Z:function(){return T}});var n=r(90849),o=r(27378),i=r(49445),c=r(98702);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=r(71142),l=r(86078);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f,O,g=function(e){var t=e.nextInteractionPayload,r=e.skip,n=void 0!==r&&r,c=(0,o.useState)(!1),a=c[0],u=c[1],p=(0,o.useState)(null),f=p[0],O=p[1],g=(0,o.useState)(),b=g[0],y=g[1],v=Boolean(t),S=i.client.nextInteractionApi.getNextInteraction;return(0,o.useEffect)((function(){if(t&&!n)if(u(!0),(0,l.I)().success){var e=d(d({},t),{},{authorizeParams:(0,l.O)()});S(e).then((function(e){y(e)})).catch((function(e){var t;O(null===e||void 0===e?void 0:e.errors),null===e||void 0===e||null===(t=e.errors)||void 0===t||t.forEach((function(e){(0,s.O7)({error:e,location:"useNextInteraction",severity:s.zb.ERROR})}))})).finally((function(){u(!1)}))}else u(!1)}),[n,v]),{nextApiInteractions:b,error:f,loading:a}},b=r(62044),y=(0,b.getConfig)("pricingSdkConfig").timeout;!function(e){e.CS_SUB="CS_SUB",e.CS_SUB_V2="CS_SUB_V2",e.EB_SUB="EB_SUB",e.MATH_SUB="MATH_SUB"}(O||(O={}));var v=(f={},(0,n.Z)(f,i.ProductType.CHEGG_MATH,[O.MATH_SUB]),(0,n.Z)(f,i.ProductType.CHEGG_STUDY,[O.CS_SUB_V2]),(0,n.Z)(f,i.ProductType.CHEGG_STUDY_PACK,[O.CS_SUB,O.EB_SUB,O.MATH_SUB]),(0,n.Z)(f,i.ProductType.WRITING_TOOLS,[O.EB_SUB]),f),S=function(e){switch(e){case"AU":case"CA":return i.Commands.ELIGIBILITY_V2_WITH_TAX;default:return i.Commands.ELIGIBILITY_V2}},P=function(e){var t=e.dataRequested,r=e.productCode,n=e.countryCode,c=void 0===n?"US":n,a=e.openToUpgrade,u=void 0!==a&&a,p=e.skip,d=void 0!==p&&p,f=(0,o.useState)(!1),O=f[0],g=f[1],b=(0,o.useState)(),P=b[0],h=b[1],C=(0,o.useState)(),j=C[0],I=C[1];return(0,o.useEffect)((function(){O||P||d||(g(!0),(0,l.I)().success?i.client.pricingApi.getPricingV2({countryCode:c,dataRequested:null!==t&&void 0!==t?t:S(c),experiment:"BASE",offerId:v[r],productCode:r,openToUpgrade:u},{timeout:y}).then((function(e){h(e.data)})).catch((function(e){(0,s.O7)({error:e,location:"usePricing",severity:s.zb.ERROR}),I(new Error("failed to fetch pricing"))})).finally((function(){return g(!1)})):g(!1))}),[d]),{data:P,loading:O,error:j}},h=r(69065),C=function(e){var t=e.params,r=e.skip,n=void 0!==r&&r,c=(0,o.useState)(),a=c[0],u=c[1],l=(0,o.useState)(!1),p=l[0],d=l[1],f=(0,o.useState)(),O=f[0],g=f[1],b=!!t;return(0,o.useEffect)((function(){a||p||!t||n||(d(!0),i.client.checkoutUrlBuilderApi.getCheckoutUrl(t).then((function(e){var t,r=null===(t=e.data)||void 0===t?void 0:t.url;r?u((0,h.Z)(r)):g(new Error("Failed to get checkout url"))})).catch((function(e){g(e),(0,s.O7)({error:e,location:"useCheckoutUrl",severity:s.zb.ERROR})})).finally((function(){return d(!1)})))}),[a,b,n]),{checkoutUrl:a,loading:p,error:O}};function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=r(83346),_=r(79098);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U=function(e){var t=e.nextInteractionPayload,r=e.showDcoForNewUser,n=e.pricingData,o=n.eligibility,a=(o=void 0===o?{eligible:!1,finalActions:[]}:o).eligible,s=void 0!==a&&a,l=o.finalActions,p=r&&s&&(void 0===l?[]:l).includes("JOIN")?[i.Interactions.DEFAULT_CHECKOUT,i.Interactions.DCO_1_CLICK,i.Interactions.OTHER]:void 0;return function(e){var t,r=e.itemAnnotations,n=void 0===r?{}:r,o=e.errorUrl,a=e.hostAnnotations,s=e.pricingData,l=e.productName,p=e.successUrl,d=e.interactions;return{interactions:void 0===d?[i.Interactions.DCO_1_CLICK,i.Interactions.OTHER,i.Interactions.DCO_1_CLICK_NO_PRIOR_ORDER]:d,pricingData:s,productName:l,itemAnnotations:n,successUrl:null!==p&&void 0!==p?p:"/",errorUrl:null!==o&&void 0!==o?o:"/",hostAnnotations:u(u({},a),{},{uvn:null!==(t=(0,c.S)())&&void 0!==t?t:""})}}(D(D({},t),{},{pricingData:n,interactions:p}))},E=function(e){var t=e.product,r=e.isMobile,n=e.pricingData;if(t){var o=(0,_.C)(t),i=o.name,a=o.transactionSource,u=o.pageName,s=o.pageSubCategory2,l=o.bundle;return function(e){var t,r=e.annotations,n=e.errorUrl,o=e.hostAnnotations,i=e.pricingData,a=e.productName,u=e.successUrl,s=e.view,l=e.bundle,p=null===i||void 0===i?void 0:i.eligibility.price;if(p){var d=p.itemDetails;return{items:[{annotation:r,externalId:d.externalId,catalogItemId:d.id,pricingId:p.pricingLogId,experiment:p.experiment,productName:a}],productType:i.productFamily,successUrl:null!==u&&void 0!==u?u:window.location.href,errorUrl:null!==n&&void 0!==n?n:window.location.href,bundle:l,hostAnnotations:I(I({},o),{},{uvn:null!==(t=(0,c.S)())&&void 0!==t?t:""}),view:s}}}({hostAnnotations:{isMobile:r,pageName:u,pageSubCategory2:s,transactionSource:a},pricingData:n,productName:i,successUrl:w.um,errorUrl:"/",bundle:l})}},T=function(e){var t,r,n,c=e.pricingPayload,a=e.nextInteractionPayload,u=e.showDcoForNewUser,l=e.product,p=e.skip,d=void 0!==p&&p,f=e.isMobile,O=void 0!==f&&f,b=P(D(D({},c),{},{skip:d})),y=E({product:l,isMobile:O,pricingData:b.data}),v=C({skip:d,params:y}),S=(0,o.useMemo)((function(){var e,t;return!b.loading&&b.data?{isSoftLoggedIn:(null===b||void 0===b||null===(e=b.data)||void 0===e||null===(t=e.authState)||void 0===t?void 0:t.state)!==i.LoggedInState.HARD,updatedNextInteractionPayload:U({nextInteractionPayload:a,pricingData:b.data,showDcoForNewUser:u})}:{}}),[b.data,b.loading]),h=S.isSoftLoggedIn,j=S.updatedNextInteractionPayload,I=g({nextInteractionPayload:j,skip:!j||h||d}),w=I.nextApiInteractions,_=I.loading,m=I.error;return null!==w&&void 0!==w&&null!==(t=w.errors)&&void 0!==t&&t.length&&w.errors.forEach((function(e){(0,s.O7)({severity:s.zb.CRITICAL,error:new Error("Type: ".concat(e.type," Code: ").concat(e.code," Message: ").concat(e.message)),location:"useCheckout"})})),{nextApiInteractions:null!==w&&void 0!==w?w:void 0,pricingData:null!==(r=b.data)&&void 0!==r?r:void 0,loading:_||b.loading,error:Boolean((null===m||void 0===m?void 0:m.length)||b.error||(null===w||void 0===w||null===(n=w.errors)||void 0===n?void 0:n.length)),isSoftLoggedIn:h,checkoutUrlResult:v}}},86078:function(e,t,r){r.d(t,{I:function(){return d},O:function(){return p}});var n=r(90849),o=r(69065),i=r(49445);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var a=(0,r(62044).getConfig)("pricingSdkConfig"),u=a.sdkKey,s=a.cheggGraphQlUrl,l=(0,o.Z)(),p=function(){return{apiKey:u,cheggBaseUrl:l,csrfToken:"csrfToken",useBFF:!0,cheggGraphQLUrl:s}},d=function(){return i.client.authorize(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},p()))}},89499:function(e,t,r){var n=r(90849),o=r(90089),i=["pageSubCategory2","isInApp","isMobile"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e){var t=e.pageSubCategory2,r=void 0===t?"":t,n=e.isInApp,c=void 0!==n&&n,u=e.isMobile,s=void 0!==u&&u;return a(a({},(0,o.Z)(e,i)),{},{isInApp:c,isMobile:s,pageSubCategory2:r,orderPlacedOn:"Web"})}},10905:function(e,t,r){r.d(t,{$:function(){return o}});var n=r(98702),o=function(e){(0,n.Vb)(n.yV.ORDER_REDIRECT,e,{expires:1})}},34911:function(e,t,r){var n;r.d(t,{Q:function(){return n}}),function(e){e.CS="cs",e.CSP="csp"}(n||(n={}))},79098:function(e,t,r){r.d(t,{C:function(){return i}});var n=r(49445),o=r(34911),i=function(e){switch(e){case o.Q.CSP:return{name:n.ProductName.CHEGG_STUDY_PACK,type:n.ProductType.CHEGG_STUDY_PACK,offerId:["CS_SUB","EB_SUB","MATH_SUB"],transactionSource:"bundle_checkout",pageName:"bundle_checkout",pageSubCategory2:"bundle",bundle:o.Q.CSP};case o.Q.CS:default:return{name:n.ProductName.CHEGG_STUDY,type:n.ProductType.CHEGG_STUDY,offerId:["CS_SUB_V2"],transactionSource:"CS Checkout",pageName:"CS Checkout",pageSubCategory2:"cs",bundle:"none"}}}}}]);
//# sourceMappingURL=38216-bf6db246a9581a25.js.map
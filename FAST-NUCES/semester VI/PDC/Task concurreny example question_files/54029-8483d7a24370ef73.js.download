"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[54029],{54029:function(e,t,r){r.d(t,{l2:function(){return b},Og:function(){return m},vA:function(){return g},zc:function(){return K},yb:function(){return ut},Qp:function(){return _},nr:function(){return O},eE:function(){return f},eY:function(){return h},ol:function(){return Tn},rP:function(){return Dn},hu:function(){return wr},n7:function(){return Ze},Ph:function(){return Le},Gn:function(){return ce},Ff:function(){return se},mh:function(){return Or},tv:function(){return Ue},nK:function(){return ne},RT:function(){return Me},Hj:function(){return Oe},BY:function(){return Ee},M1:function(){return Re},jO:function(){return te},ZR:function(){return L},LO:function(){return xe},_7:function(){return De},ME:function(){return be},fw:function(){return Ke},W5:function(){return Qe},Lm:function(){return He},oK:function(){return et}});var n,o,a=r(64649);!function(e){e.CLICKSTREAM_INTERACTION="clickstream_interaction",e.SEARCH_QUERY="search_query",e.CLICKSTREAM_NOTIFICATIONS="clickstream_notifications",e.CLICKSTREAM_SUCCESS="clickstream_success"}(n||(n={})),function(e){e.BUTTON="button",e.LINK="link"}(o||(o={}));var c,i;!function(e){e.textbooks="isbn13",e.study="question_id",e.question="question_id",e.tbsproblem="problem_id",e.decks="deck_id",e.learn="term_uuid",e.capp="study_guide_id",e.videos="video_id",e["professor content"]="faculty_document_id"}(c||(c={})),function(e){e.high="high",e.low="low"}(i||(i={}));var s={profile:"bigegg-srp",autoType:"none",intent:"none",classifier:"all",page:1,pageSize:6},u={page:1,pageSize:10},l=function(e){return e.map((function(e,t){return{search_result_id:e.name,search_result_type:"related_search",search_result_rank:t+1,search_result_module_name:null,search_result_module_rank:1,search_result_rank_in_module:t+1,is_search_result_cached:null,search_result_category_exists:null}}))};function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t.slice(1);return function(){return o.reduce((function(e,t){return t(e)}),n.apply(void 0,arguments))}}var f,d=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return p.apply(void 0,[e].concat(r))},h="searchDataSource",g="apollographql-client-name",m="search",b="chegg-search-id",y="rec_search",v="Q: ";!function(e){e.LOADING="loading",e.SUCCESS="success",e.NO_RESULTS="noResults",e.ERROR="error",e.CANCELLED="cancelled"}(f||(f={}));var O=Object.freeze({EXACT:98,GREAT:80,PARTIAL:50}),_=Object.freeze({EXACT:"exact",GREAT:"great",PARTIAL:"partial"}),w=Object.freeze({SEARCH_QUERY:"SearchBox-search-query",TRANSCRIBE_IMAGE_QUERY:"SearchBox-transcribe-image-query",RECENT_QUERY:"SearchBox-recent-query",IMAGE_CROPPING:"SearchBox-image-cropping",URL_QUERY_PARAMS:"SearchBox-URL-query-prams"}),E=function(e){return function(t){var r;return null!==(r=null===t||void 0===t?void 0:t.substring(0,e))&&void 0!==r?r:""}},C=E(1024),j=C,R=r(84018),P=function(){return window.matchMedia("(max-width: ".concat(R.Z.sm.max,")")).matches?"mobile":"desktop"},S=function(e){return!(null===e||void 0===e||!e.length)};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=function(e){var t=e.page,r=e.pageSize,n=e.matchCount,o=e.intent,a=e.term,c=e.filter,i=e.autoType,s=e.season,u=e.classifier,l=e.results;return k(k({},e),{},{page:null!==t&&void 0!==t?t:1,pageSize:null!==r&&void 0!==r?r:0,matchCount:null!==n&&void 0!==n?n:0,intent:null!==o&&void 0!==o?o:"none",term:C(a),filter:null!==c&&void 0!==c?c:"none",autoType:null!==i&&void 0!==i?i:"none",experience:P(),season:null!==s&&void 0!==s?s:"NONE",classifier:null!==u&&void 0!==u?u:null,results:S(l)?l:void 0})},T=r(32292),D=function(e){return{search_strack_id:e.strackId,search_track_id:e.trackId,search_type:e.searchType,search_profile:e.profile,search_page_number:e.page,search_page_size:e.pageSize,search_match_count:e.matchCount,search_intent:e.intent,search_term:e.term,search_filter:e.filter,search_additional_filter:e.additionalFilter,search_auto_type:e.autoType,search_experience:e.experience,search_season:e.season,search_classifier:e.classifier,search_spell_check_term:e.spellcheckTerm,search_spell_check_confidence:e.spellcheckConfidence,search_results:e.results}},Z=d(I,D,(function(e){return(0,T.getClient)().sendEvent({type:n.SEARCH_QUERY,version:"4",data:e})}));function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L=function(e){var t=e.searchData,r=e.relatedSearches;return Z(z(z(z({},s),t),{},{results:l(r)}))},U=function(e,t){if(null!==e&&void 0!==e&&e.length&&t){var r=e.find((function(e){return e.search_result_id===t}));if(r){var n={result_id:r.search_result_id,result_rank:r.search_result_rank,result_type:r.search_result_type,result_module_rank:r.search_result_module_rank,result_module_name:r.search_result_module_name,result_rank_in_module:r.search_result_rank_in_module,is_result_cached:r.is_search_result_cached,result_category_exists:r.search_result_category_exists};return r.search_result_match_percent&&(n.result_match_badge=r.search_result_match_badge,n.result_match_percent=r.search_result_match_percent),r.search_result_match_percent_v2&&(n.result_match_percent_v2=r.search_result_match_percent_v2),n}}},q=function(e){return"content discovery"===(null===e||void 0===e?void 0:e.result_type)?c[e.result_module_name]:c[null===e||void 0===e?void 0:e.result_type]};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=function(e){var t=e.interaction,r=e.content,n=e.searchData,o=n.strackId,a=n.trackId,c=n.searchType,i=n.profile,s=n.page,u=n.pageSize,l=n.matchCount,p=n.intent,f=n.term,d=n.filter,h=n.additionalFilter,g=n.autoType,m=n.experience,b=n.season,y=n.classifier,v=n.spellcheckTerm,O=n.spellcheckConfidence,_=n.results,w=U(_,null===r||void 0===r?void 0:r.content_id),E=q(w);return{interaction:t,content:B(B({},r),{},{content_label:E,metadata:B(B({},null===r||void 0===r?void 0:r.metadata),{},{search:B({strack_id:o,track_id:a,type:c,profile:i,page_number:s,page_size:u,match_count:l,intent:p,term:f,filter:d,additional_filter:h,auto_type:g,experience:m,season:b,classifier:y,spell_check_term:v,spell_check_confidence:O,results:_},w)})})}},H=function(e){return(0,T.getClient)().sendEvent({type:n.CLICKSTREAM_INTERACTION,version:3,data:e,options:{force:!0}})};function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G=d((function(e){return F(F({},e),{},{searchData:I(e.searchData)})}),N,H);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K,X,$,V,J,ee,te=function(e){var t=e.relatedSearches,r=e.searchData,n=e.contentId,o=l(t);return G({searchData:W(W(W({},s),r),{},{results:o}),content:{content_id:n},interaction:{type:"search",element:{name:"query result item",type:"link",text:n,value:n,region_name:"related search"}}})};!function(e){e.all="all",e.study="study",e.learn="learn",e.decks="decks",e.capp="capp",e.textbooks="textbooks",e.textbooksisbnsuggester="textbooksisbnsuggester",e.textbooksIsbnSuggester="textbooksIsbnSuggester",e.videos="videos",e.uversity="uversity"}(K||(K={})),function(e){e.CASE_STUDIES="CASE_STUDIES",e.EXAMS="EXAMS",e.EXAM_STUDY_GUIDE="EXAM_STUDY_GUIDE",e.LAB_NOTES="LAB_NOTES",e.LECTURE_NOTES="LECTURE_NOTES",e.OTHER="OTHER",e.QUIZ="QUIZ",e.SYLLABUS="SYLLABUS"}(X||(X={})),function(e){e.MATCH_SCORE_DESC="MATCH_SCORE_DESC",e.SCORE_DESC="SCORE_DESC"}($||($={})),function(e){e.CHAPTER="CHAPTER",e.COURSE="COURSE",e.TOPIC="TOPIC",e.UNIT="UNIT"}(V||(V={})),function(e){e.MIXED_QUESTION="MIXED_QUESTION",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE",e.SHORT_NUMERIC="SHORT_NUMERIC",e.TRUE_FALSE="TRUE_FALSE"}(J||(J={})),function(e){e.EXAM="EXAM",e.PRACTICE="PRACTICE"}(ee||(ee={}));var re,ne=function(e){return e===K.textbooksisbnsuggester||e===K.textbooksIsbnSuggester},oe=function(e){var t,r,n=null!==(t=null===e||void 0===e||null===(r=e.orderedIntents)||void 0===r?void 0:r[0].name)&&void 0!==t?t:"none";return n=ne(n)?"textbooks":n},ae=function(e){switch(e){case K.textbooksisbnsuggester:case K.textbooksIsbnSuggester:case K.textbooks:return K.textbooks;case K.study:return K.study;case K.learn:return K.learn;case K.capp:return K.capp;case K.decks:return K.decks;case K.videos:return K.videos;case K.uversity:return"professor content";case"hero":return"hero";default:return null}},ce=function(e){var t,r,n,o=e.results,a=e.contentType,c=e.lazy;return a&&!c?a.includes(",")?a.split(","):[a]:null!==(t=null!==(r=null===(n=o.orderedIntents)||void 0===n?void 0:n.map((function(e){return e.name})))&&void 0!==r?r:o.order)&&void 0!==t?t:[]},ie=function(e){switch(e){case K.textbooksIsbnSuggester:return K.textbooksisbnsuggester;case K.uversity:return"professor content";default:return e}},se=function(e){if("number"!==typeof e)return null;switch(!0){case e>=O.EXACT:return _.EXACT;case e>=O.GREAT:return _.GREAT;case e>=O.PARTIAL:return _.PARTIAL;default:return null}},ue=function(e,t){var r=[],n=0;if(e){var o=t!==K.all?t:void 0;ce({results:e,contentType:o}).forEach((function(o,a){var c=e[o];c&&c.responseContent&&c.responseContent.docs.forEach((function(e,c){++n;var i="suggestions"===o?null:o;i=o!==K.textbooks&&o!==K.study&&o!==K.learn||0!=a||0!=c||t!==K.all?i:"hero",(i=ne(i)?K.textbooks:i)===K.uversity&&(i="professor content");var s={search_result_id:"",search_result_rank:n,search_result_type:ie(o),search_result_module_rank:a+1,search_result_module_name:i,search_result_rank_in_module:c+1,search_result_sub_type:"professor content"===i&&"documentType"in e?e.documentType.toLowerCase():null,is_search_result_cached:null,search_result_category_exists:null,search_result_algo_score:"score"in e?e.score:void 0};"matchScore"in e&&"number"===typeof e.matchScore&&(s.search_result_match_percent=e.matchScore,s.search_result_match_badge=se(e.matchScore)),"matchScoreV2"in e&&"number"===typeof e.matchScoreV2&&(s.search_result_match_percent_v2=e.matchScoreV2),"id"in e?s.search_result_id=e.id:"ean"in e&&(s.search_result_id=e.ean),r.push(s)}))}))}return r},le=(re={},(0,a.Z)(re,i.low,"low-confidence"),(0,a.Z)(re,i.high,"high-confidence"),re),pe=function(e){return e in le?le[e]:"none"},fe=function(e){var t,r,n=(null===e||void 0===e||null===(t=e.spellcheck)||void 0===t||null===(r=t.responseContent)||void 0===r?void 0:r.docs[0])||{},o=n.correctedQuery,a=n.confidence;return{spellcheckTerm:j(o),spellcheckConfidence:pe(a)}},de=function(e,t){var r=e.results,n=e.countDisplayed,o=e.count,a=oe(r),c=ae(t),i=ue(r,t),s=fe(r);return{results:i,intent:a,classifier:c,spellcheckTerm:s.spellcheckTerm,spellcheckConfidence:s.spellcheckConfidence,pageSize:n,matchCount:o}},he=de;function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be=function(e){var t=e.searchData,r=e.searchResponse,n=he(r,t.classifier),o=n.spellcheckConfidence,a=n.spellcheckTerm,c=("high-confidence"===o?"search instead for ".concat(a):"did you mean ".concat(a)).toLowerCase(),i="high-confidence"===o?"alternate query":"intended query";return G({searchData:me(me({},t),n),interaction:{element:{type:"link",name:i,value:c},type:"search"}})};function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oe=function(e){var t=e.searchData,r=e.searchResponse,n=e.filterRemoved,o=de(r,t.classifier);return G({searchData:ve(ve({},t),o),interaction:{element:{name:"remove search filter",type:"icon",value:n},type:"click"}})};function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ee=function(e){var t=e.searchData,r=e.searchResponse,n=e.contentType,o=de(r,t.classifier);return G({searchData:we(we({},t),o),interaction:{element:{name:"filter_submit"===t.searchType?"product tab":"all results",type:"link",value:n},type:"search"}})};function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Re=function(e){var t=e.searchData,r=e.searchResponse,n=e.pageClicked,o=de(r,t.classifier);return G({searchData:je(je({},t),o),interaction:{element:{name:"paginated results",type:"link",value:n.toString()},type:"search"}})};function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xe=function(e){var t=e.searchData,r=e.searchResponse,n=e.contentId,o=e.isSuggestion,a=void 0!==o&&o,c=e.elementName,i=void 0===c?"query result item":c,s=e.elementType,u=void 0===s?"link":s,l=e.elementText,p=de(r,t.classifier),f=a?"search":"button"===u?"click":"select";return G({searchData:Se(Se({},t),p),content:{content_id:n},interaction:{element:{name:i,type:u,text:l},type:f}})};function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Te,De=function(e){var t=e.searchData,r=e.searchResponse,n=de(r,t.classifier);return Z(Ie(Ie({},t),n))};!function(e){e.recentSearch="recent search",e.searchInput="search input"}(Te||(Te={}));var Ze=function(){return("0000000000000"+(Math.abs(16777215*Math.random()<<0).toString(16)+Math.abs(16777215*Math.random()<<0).toString(16))).slice(-12)},Ae=r(60857),ze=r(71142),Le=function(e){try{return(0,Ae.Z)()[e]}catch(t){return void(0,ze.O7)({error:new Error("Malformed URI"),location:w.URL_QUERY_PARAMS,severity:ze.zb.ERROR},{initialError:t.message})}},Ue=function(){return Le("strackid")||Ze()},qe=r(75688),Me=qe.OP,Be=E(768),Ne=function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.trim().split(" ").slice(0,120).join(" "))&&void 0!==t?t:""},He=function(e){return Be(Ne(e))},Qe=function(e){return encodeURIComponent(He(e))},Fe=function(){return"undefined"!==typeof window&&!!window.localStorage},Ge=Object.freeze({SET_FAILED:"Unable to set recent queries",GET_FAILED:"Unable to get recent queries",REMOVE_FAILED:"Unable to remove recent queries"}),Ye=function(e){return He(e)},We=qe.OP,Ke=function(e){if(We(e)){var t=Ye(e),r=$e().filter((function(e){return e.toLowerCase()!==t.toLowerCase()}));r.unshift(t),Xe(r)}},Xe=function(e){try{var t=e.slice(0,10),r=Array.from(new Set(t.map(Ye)));n=y,o=JSON.stringify(r),Fe()&&n&&localStorage.setItem(n,o)}catch(a){(0,ze.O7)({error:new Error(Ge.SET_FAILED),location:w.RECENT_QUERY,severity:ze.zb.ERROR},{initialError:a.message})}var n,o},$e=function(){try{var e=(r=y,Fe()&&r?localStorage.getItem(r):null);if(null===e)return[];var t=JSON.parse(e);if(!Array.isArray(t))throw new Error("Queries from wrong stored data");return t}catch(n){return(0,ze.O7)({error:new Error(Ge.GET_FAILED),location:w.RECENT_QUERY,severity:ze.zb.ERROR},{initialError:n.message}),[]}var r},Ve=function(e){if(We(e)){var t=$e();if(t.length&&Boolean(t.find((function(t){return t.toLowerCase()===e.toLowerCase()})))){if(1===t.length)try{return n=y,void(Fe()&&n&&localStorage.removeItem(n))}catch(o){return void(0,ze.O7)({error:new Error(Ge.REMOVE_FAILED),location:w.RECENT_QUERY,severity:ze.zb.ERROR},{initialError:o.message})}var r=t.filter((function(t){return t.toLowerCase()!==e.toLowerCase()}));Xe(r)}}var n},Je=r(83463),et=(0,Je.iv)(["white-space:nowrap;@supports (-webkit-line-clamp:2){white-space:normal;max-height:max-content;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;}overflow:hidden;text-overflow:ellipsis;"]),tt=r(96535),rt=r(27378),nt=/(<em>.+?<\/em>)/gi,ot=/<em>(.+?)<\/em>/i,at=r(95999),ct=Je.ZP.span.withConfig({componentId:"sc-1vhu9m0-0"})(["& em{font-style:normal;font-weight:",";}"],at.Z.weight.bold),it=["data-test"],st=function(e){var t=e["data-test"],r=(0,tt.Z)(e,it);return rt.createElement(ct,{"data-test":t},function(e){var t=e.textToHighlight,r=e.highlightedSubstring;if(!(0,qe.OP)(t))return null;var n=t.indexOf("<em")>=0;if(!n&&!r)return t;var o,a=new RegExp("(".concat(null===(o=r)||void 0===o?void 0:o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi"),c=n?nt:a,i=n?ot:a;return t.split(c).filter((function(e){return""!==e})).map((function(e,r){var n=i.exec(e);return n&&n[1]?rt.createElement("em",{key:"".concat(t,"-").concat(n[1],"-").concat(r).replace(" ","_")},n[1]):rt.createElement("span",{key:"".concat(t,"-").concat(e,"-").concat(r).replace(" ","_")},e)}))}(r))};st.displayName="HighlightText";var ut=(0,rt.memo)(st),lt=r(13285),pt=r(8136),ft=r(86677),dt=r(49034),ht=r(70807),gt=r(75383),mt=r(45980),bt=r(63819),yt=r(68860),vt=Je.ZP.div.withConfig({componentId:"bne122-0"})(["font-weight:",";font-family:",";font-size:",";color:",";line-height:",";letter-spacing:",";cursor:pointer;-webkit-text-size-adjust:100%;& em{font-weight:",";}"],at.Z.weight.bold,(function(e){return e.customTheme.fontFamily}),(function(e){return e.customTheme.fontSize}),(function(e){return e.customTheme.color}),(function(e){return e.customTheme.lineHeight}),(function(e){return e.customTheme.letterSpacing}),at.Z.weight.normal),Ot=r(24662),_t=function(e){var t,r=e.suggestion,n=e.query,o=e.className,a=e.theme,c=e["data-test"],i=(0,Ot.useComponentTheme)({name:"SearchSuggestion",theme:(t=a,{default:function(e){return{fontSize:"inherit",color:e.colors.secondary.darker,fontFamily:e.font.family,lineHeight:e.font.lineHeight.sm,letterSpacing:e.font.letterSpacing.md}},fanta:{fontSize:at.Z.size.px18,color:yt.Z.dark,fontFamily:at.Z.family.default,lineHeight:at.Z.lineHeight.sm,letterSpacing:"normal"},prop:t})});return rt.createElement(vt,{className:o,customTheme:i},rt.createElement(ut,{"data-test":null!==c&&void 0!==c?c:"suggestion-term",textToHighlight:r,highlightedSubstring:n}))},wt=_t,Et=r(52943),Ct=Je.ZP.div.withConfig({componentId:"wzjuve-0"})(["display:flex;justify-content:space-between;align-items:center;margin-right:-",";"],mt.Z.px4),jt=(0,Je.ZP)(wt).withConfig({componentId:"wzjuve-1"})(["flex-grow:1;padding-left:",";padding-right:",";",""],mt.Z.px8,mt.Z.px16,et),Rt=Je.ZP.span.withConfig({componentId:"wzjuve-2"})(["",""],bt.Z),Pt=(0,Je.ZP)(gt.IconButton).withConfig({componentId:"wzjuve-3"})(["padding:0.25rem;&::before{content:'';position:absolute;inset:-0.625rem -0.75rem -0.625rem 0;}"]),St=(0,Je.ZP)(Et.Z).withConfig({componentId:"wzjuve-4"})(["padding:0.03125rem;"]),xt=function(e){var t=e.recentQuery,r=e.query,n=e.onRemoveMouseDown,o=e.hiddenText;return rt.createElement(Ct,null,rt.createElement(St,{size:"xsmall"}),rt.createElement(jt,{"data-test":"recent-query-term",suggestion:t,query:r}),o?rt.createElement(Rt,null,o):null,n?rt.createElement(Pt,{"data-test":"recent-query-remove-button",screenReaderOnlyText:"remove recent query",size:"xsmall",onMouseDown:n},rt.createElement(ht.Z,null)):null)},kt=xt,It=(0,Je.ZP)(wt).withConfig({componentId:"sc-26s21v-0"})(["",";font-weight:",";& em{font-weight:",";}&:before{content:'","';display:inline;font-weight:",";}"],et,at.Z.weight.normal,at.Z.weight.bold,(function(e){return e.prefix}),at.Z.weight.bold),Tt=function(e){var t=e.suggestion,r=e.query;return rt.createElement(It,{query:r,suggestion:t,"data-test":"study-query-term",prefix:v})},Dt=function(e){return(0,qe.OP)(e)&&e.startsWith(v)},Zt=new RegExp("".concat(v)),At=function(e){return e.replace(Zt,"").trim()},zt=function(e){var t=e.name,r=e.value;return H({interaction:{element:{name:t,type:"icon",value:r},type:"dismiss"}})},Lt={syllabus:"professor content",quiz:"professor content",exam_study_guide:"professor content",lecture_notes:"professor content",exams:"professor content",case_studies:"professor content",lab_notes:"professor content",other:"professor content",textbooks:"textbooks",study:"study",capp:"capp",decks:"decks",learn:"learn",videos:"videos"},Ut=function(e){var t;return e&&null!==(t=Lt[e])&&void 0!==t?t:null},qt=function(e){var t="",r=0,n=0;return e.map((function(e){var o=e.type,a=e.subType,c=e.uuid,i=e.rank,s="recent searches"===o;return s||(n++,t!==o&&(t=o,r++)),{search_result_id:c,search_result_rank:s?null:n,search_result_type:o,search_result_module_rank:s?null:r,search_result_module_name:Ut(a),search_result_rank_in_module:s?null:i,search_result_sub_type:a,is_search_result_cached:!!a||null,search_result_category_exists:null}}))};function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nt=function(e){var t=e.searchData,r=e.options,n=qt(r),o=n.length;return G({searchData:Bt(Bt(Bt({},u),t),{},{results:n,matchCount:o}),interaction:{element:{name:"search query",type:"text",value:j(t.term)},type:"start"}})};function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ft=function(e){var t=e.searchData,r=e.options,n=qt(r),o=n.length;return G({searchData:Qt(Qt(Qt({},u),t),{},{results:n,matchCount:o}),interaction:{element:{name:"user query",type:"enter_submit"===t.searchType?"text":"button",text:"button_submit"===t.searchType?"Search":void 0},type:"search"}})},Gt=function(){return H({interaction:{element:{name:"search box camera",type:"button",region_name:"search bar"},type:"click"}})},Yt=function(){return H({interaction:{element:{name:"image editor",type:"file",region_name:"image editor"},type:"crop"}})};function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xt=function(e){var t=e.searchData,r=e.options,n=qt(r),o=n.length;return Z(Kt(Kt(Kt({},u),t),{},{matchCount:o,results:n}))};function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Jt=function(e){var t=e.searchData,r=e.options,n=e.contentId,o=qt(r),a=o.length;return G({searchData:Vt(Vt(Vt({},u),t),{},{matchCount:a,results:o}),content:{content_id:n},interaction:{type:"search",element:{name:"query result item",type:"link"}}})},er=r(23892),tr=r.n(er),rr=r(62044),nr=r(69153),or=r(27061),ar=(tr()()||{}).publicRuntimeConfig,cr=(void 0===ar?{}:ar)[h]||(0,rr.getConfig)(h)||or.env.STORYBOOK_SEARCH_DATA_SOURCE;(0,nr.addGqlRoute)(h,cr);var ir,sr=r(74961),ur=r(50669),lr=r(59195),pr=(0,lr.ZP)(ir||(ir=(0,ur.Z)(["\n  query SearchTypeaheadQuestions($input: SearchTypeaheadInput!) {\n    searchTypeaheadQuestions(searchTypeaheadInput: $input) {\n      questionBody\n      questionPointer\n      questionHighlight\n    }\n  }\n"])));function fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var hr,gr=Object.freeze({REQUEST_FAILED:"Search typeahead request failed: "}),mr=function(e,t,r){return(0,sr.useLazyQuery)(pr,{ssr:!1,errorPolicy:"all",context:(0,a.Z)({headers:dr((0,a.Z)({},g,t?"SE-".concat(t):m),r?(0,a.Z)({},b,r):null)},h,!0),variables:e,onError:function(e){return(0,ze.O7)({error:new Error("".concat(gr.REQUEST_FAILED).concat(e.message)),location:w.SEARCH_QUERY,severity:ze.zb.ERROR},{initialError:e.message})}})},br=function(e){return j("rs_".concat(e))},yr=function(){var e=(0,rt.useState)([]),t=(0,pt.Z)(e,2),r=t[0],n=t[1],o=(0,rt.useCallback)((function(e){var t;n((t=function(e){if(!We(e))return $e();var t=Ye(e);return $e().filter((function(e){return e.toLowerCase().startsWith(t.toLowerCase())})).slice(0,2)}(e),t.map((function(e){return{url:"/search",id:br(e),value:e,type:"recent searches",rank:null,item:{}}}))))}),[]),a=(0,rt.useCallback)((function(e){Ke(e),o(e)}),[]),c=(0,rt.useCallback)((function(e,t){Ve(e),o(t)}),[]);return{getRecentSearchesByQuery:o,removeRecentQuery:c,setRecentQuery:a,recentSearches:r}},vr=r(33940),Or=function(){var e;return null!==(e=_r())&&void 0!==e?e:wr()},_r=function(){return Le("searchid")},wr=function(){if("undefined"!==typeof window&&"object"===(0,vr.Z)(window.crypto)&&"function"===typeof window.crypto.randomUUID)return window.crypto.randomUUID()},Er=(0,lr.ZP)(hr||(hr=(0,ur.Z)(["\n  query TranscribeImage($imageBlob: String!) {\n    transcribeImage(imageBlob: $imageBlob) {\n      transcriptionText\n    }\n  }\n"]))),Cr=Object.freeze({REQUEST_FAILED:"Search transcribe image request failed: "}),jr=function(e,t){return(0,sr.useLazyQuery)(Er,{ssr:!1,errorPolicy:"all",fetchPolicy:"network-only",context:(0,a.Z)({headers:(0,a.Z)({},g,t?"SE-".concat(t):m)},h,!0),variables:e,onError:function(e){return(0,ze.O7)({error:new Error("".concat(Cr.REQUEST_FAILED).concat(e.message)),location:w.TRANSCRIBE_IMAGE_QUERY,severity:ze.zb.ERROR},{initialError:e.message})}})},Rr=function(){return H({interaction:{element:{name:"open image upload",type:"button",region_name:"search bar"},type:"click"}})},Pr=function(){return H({interaction:{element:{name:"done",type:"button",region_name:"search bar"},type:"click"}})};function Sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kr=function(e){var t=e.searchData;return G({searchData:xr(xr({},u),t),content:{metadata:{cs:{search_method:"camera"}}},interaction:{type:"search",element:{name:"user query",type:"text",value:"camera"}}})};function Ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Tr=function(e){var t=e.searchData;return Z(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t))},Dr=function(e){return(0,T.getClient)().sendEvent({type:n.CLICKSTREAM_SUCCESS,version:"4",data:e})},Zr=function(){return Dr({name:"image search submit to ocr"})},Ar=function(e){return(0,T.getClient)().sendEvent({type:n.CLICKSTREAM_NOTIFICATIONS,version:"3",data:e})},zr=function(e){return Ar({notifications:{type:"error",message_name:"unable to transcribe image",message_detail:e.message_detail}})},Lr=function(){if("undefined"!==typeof window)return window.navigator.userAgent};function Ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mr=Ze(),Br=Ze(),Nr=wr(),Hr=function(e){var t=e.initialQuery,r=e.bffSearchProfile,n=e.courseId,o=e.contentType,a=e.disableSuggestions,c=e.clientName,i=(0,ft.useRouter)(),s=(0,rt.useRef)(i.asPath);(0,rt.useEffect)((function(){i.asPath!==s.current&&(Mr=Ze(),Br=Ze(),Nr=wr(),s.current=i.asPath)}),[i.asPath]);var u=(0,rt.useRef)(!1),l=(0,rt.useRef)(!1),p=(0,rt.useRef)(!0);(0,rt.useEffect)((function(){return function(){p.current=!1}}),[]);var f=yr(),d=f.getRecentSearchesByQuery,h=f.removeRecentQuery,g=f.setRecentQuery,m=f.recentSearches,b=(0,rt.useRef)(t||""),y=(0,rt.useState)(t||""),O=(0,pt.Z)(y,2),_=O[0],w=O[1],E=(0,rt.useState)([]),C=(0,pt.Z)(E,2),j=C[0],R=C[1],P=(0,rt.useState)(""),S=(0,pt.Z)(P,2),x=S[0],k=S[1],I=(0,rt.useState)(!1),T=(0,pt.Z)(I,2),D=T[0],Z=T[1],A={input:{searchTypeaheadQuery:_,searchTypeaheadResultSize:10,questionHighlightSnippetSize:3}},z=mr(A,c,Nr),L=(0,pt.Z)(z,2),U=L[0],q=L[1].data,M=jr({imageBlob:""}),B=(0,pt.Z)(M,2),N=B[0],H=B[1],Q=H.data,F=H.loading,G=H.error,Y=(0,rt.useState)(!1),W=(0,pt.Z)(Y,2),K=W[0],X=W[1],$=(0,rt.useState)(!1),V=(0,pt.Z)($,2),J=V[0],ee=V[1];(0,rt.useEffect)((function(){X(Boolean(G)),Boolean(G)&&zr({message_detail:null===G||void 0===G?void 0:G.message})}),[G]),(0,rt.useEffect)((function(){ee(F)}),[F]),(0,rt.useEffect)((function(){var e=null===q||void 0===q?void 0:q.searchTypeaheadQuestions;p.current&&null!==e&&void 0!==e&&e.length&&R(e.map((function(e,t){var r;return{id:"".concat(e.questionPointer,"-").concat(e.questionBody),url:"/search",value:"".concat(v," ").concat(e.questionBody),valueHighlight:"".concat(v," ").concat(null!==(r=e.questionHighlight)&&void 0!==r&&r.length?e.questionHighlight.join("..."):e.questionBody),type:"suggestions",item:e,rank:t+1}})))}),[q]),(0,rt.useEffect)((function(){var e=null!==t&&void 0!==t?t:"";w(e),l.current&&d(e)}),[t]),(0,rt.useEffect)((function(){var e,t,r=He(null!==(e=null===Q||void 0===Q||null===(t=Q.transcribeImage)||void 0===t?void 0:t.transcriptionText)&&void 0!==e?e:"");Me(r)&&(Zr(),b.current!==r?(w(r),g(r),kr({searchData:qr(qr({},te),{},{autoType:"camera",searchType:"button_submit",profile:"bigegg-srp",term:""}),options:[]}),Tr({searchData:qr(qr({},te),{},{term:r,autoType:"camera",searchType:"button_submit",profile:"bigegg-srp"})}),b.current=r,le(r,o),he()):he())}),[Q]);var te=(0,rt.useMemo)((function(){return{trackId:Mr,strackId:Br,searchType:"autosuggest",term:_,autoType:"keyup",profile:r}}),[r,_,Mr,Br]),re=function(e,t,r){return function(n){n.preventDefault(),n.stopPropagation(),zt({name:Te.recentSearch,value:r}),h(e,t)}},ne=(0,rt.useCallback)((function(e,t){if(t.shiftKey&&t.altKey&&"Backspace"===t.key){var r,n=null===(r=(0,lt.Z)(m).at(e))||void 0===r?void 0:r.value;if(!n)return;h(n,_.trim())}}),[_,m,h]),oe=(0,rt.useMemo)((function(){var e;return null!==(e=Lr())&&void 0!==e&&e.includes("Mac")?";To remove this item, press Shift + Option + Delete.":";To remove this item, press Shift + Alt + Backspace."}),[]),ae=(0,rt.useMemo)((function(){return(0,lt.Z)(function(e,t){return e.map((function(e){var r=e.url,n=e.type,o=e.id,a=e.value,c=e.valueHighlight,i=e.rank,s="".concat(a),u="recent searches"===n,l=Dt(s)?At(s):s,p=u?rt.createElement(kt,{recentQuery:l,query:t,hiddenText:oe,onRemoveMouseDown:re(l,t,o)}):rt.createElement(Tt,{suggestion:c?At(c):l,query:t});return{url:"".concat(r),type:"".concat(n),uuid:"".concat(o),value:l,rank:i,child:p}}))}([].concat((0,lt.Z)(m),(0,lt.Z)(j)).slice(0,10),_.trim()))}),[_,m,j]),ce="".concat(ae.map((function(e){return e.uuid})));(0,rt.useEffect)((function(){if(p.current&&ae.length){var e=ie.current,t=e.query,r=e.autoType,n=void 0===r?"keyup":r;Xt({searchData:qr(qr({},te),{},{term:t,autoType:n}),options:ae})}}),[ce]);var ie=(0,rt.useRef)({query:"",autoType:void 0}),se=(0,rt.useCallback)((0,dt.Z)((function(e){ue(e)}),225),[]),ue=function(e){ie.current=e;var t=e.query;if(p.current){if(d(t),!Me(t))return void R([]);U({variables:{input:qr(qr({},A.input),{},{searchTypeaheadQuery:t})}})}},le=function(e,t){i.push({pathname:"/search",query:Object.assign({q:e,trackid:Mr,strackid:Br,searchid:Nr,p:1},t?{contentType:t}:{},n?{courseId:n}:{})})},pe=(0,rt.useCallback)((function(){u.current||(d(_),u.current=!0)}),[_]),fe=(0,rt.useCallback)((function(e){ee(!1),X(!1),Z(!0),k(e),Rr()}),[]),de=(0,rt.useCallback)((function(e){Pr(),N({variables:{imageBlob:e}})}),[]),he=(0,rt.useCallback)((function(){k(""),Z(!1),ee(!1),X(!1)}),[]),ge=(0,rt.useCallback)((function(){Gt()}),[]),me=(0,rt.useCallback)((function(){Yt()}),[]);return{query:_,options:ae,onClear:function(){zt({name:Te.searchInput,value:_}),w(""),se({query:"",autoType:"delete"})},onSubmit:function(e){if(Me(_)&&b.current!==_){b.current=_,g(_);var t="click"==e.nativeEvent.type?"button_submit":"enter_submit",r={searchData:qr(qr({},te),{},{searchType:t}),options:ae};Xt(r),Ft(r),le(He(_),o)}},onInputChange:function(e){var t=e.target.value,r="nativeEvent"in e?e.nativeEvent:void 0,n="insertFromPaste"===(null===r||void 0===r?void 0:r.inputType)?"paste":"keyup";l.current||(Nt({searchData:qr(qr({},te),{},{term:t,autoType:n}),options:ae}),l.current=!0),a||se({query:t,autoType:n}),w(t)},onInputFocus:pe,onResultSelect:function(e){var t=ae[e],r=t.uuid,n=t.value,a={searchData:qr(qr({},te),{},{searchType:"suggestion_click"}),options:ae};Xt(a),Jt(qr(qr({},a),{},{contentId:r})),w(n),g(n),le(n,o)},removeSearchHistory:ne,imageBlobBase64:x,modalOpen:D,onImgSelected:fe,onCropFinished:de,onCropChanged:me,onImgSearchCancel:he,onCameraButtonClick:ge,imgSearchHasError:K,imgSearchIsLoading:J,setImgSearchHasError:X,setImgSearchIsLoading:ee}},Qr=r(49463),Fr=r(15512),Gr=(0,Je.ZP)(Fr.Modal).attrs({theme:{borderRadius:"0",shadow:"none",lg:{padding:"0"},sm:{padding:"0"},md:{padding:"0"}}}).withConfig({componentId:"sc-18w1ugb-0"})(["div[role='dialog']{width:100%;height:100vh;background-color:",";& > div:first-child > div:first-child{width:100%;height:100vh;height:100svh;position:relative;display:flex;align-items:center;justify-content:center;}}"],yt.Z.dark),Yr=Je.ZP.div.withConfig({componentId:"sc-18w1ugb-1"})(["position:absolute;top:",";left:",";"],mt.Z.px32,mt.Z.px32),Wr=function(e){var t=e["aria-label"],r=e["data-test"],n=e.children,o=e.leftTopElement,a=e.onClose,c=e.isOpen,i=e.id,s=e.hideBackgroundOverlay,u=e.hideCloseButton;return rt.createElement(Gr,{"aria-label":t,"data-test":r,id:i,onClose:a,isOpen:c,hideCloseButton:u,hideBackgroundOverlay:s,shouldCloseOnClickOutside:!1,renderFullScreenWithMarginOnMobile:!1},o?rt.createElement(Yr,null,o):rt.createElement(rt.Fragment,null),n)},Kr=Wr,Xr=r(73789),$r=r(27791),Vr=r(50824),Jr=r.n(Vr),en=r(81851),tn={x:0,y:0,width:100,height:100,unit:"%"},rn=Object.freeze({IMAGE_PROCESSING_ON_DONE:"Image processing on done failed: ",IMAGE_PROCESSING_ON_ROTATE:"Image processing on rotate failed: "}),nn=Je.ZP.div.withConfig({componentId:"sc-1hrxn9g-0"})(["display:grid;grid-template-rows:calc( 100vh - ","  - clamp(",",5vh,",")  - ","  - ","  ) max-content;@supports (height:100svh){grid-template-rows:calc( 100svh - ","  - clamp(",",5vh,",")  - ","  - ","  ) max-content;}gap:",";justify-content:stretch;align-content:stretch;place-items:center;width:100%;height:100%;max-width:","px;justify-self:center;align-self:end;.ReactCrop{position:relative;display:inline-block;cursor:crosshair;overflow:hidden;max-width:100%;max-height:100%;}.ReactCrop *,.ReactCrop *::before,.ReactCrop *::after{box-sizing:border-box;}.ReactCrop--disabled,.ReactCrop--locked{cursor:inherit;}.ReactCrop__child-wrapper{max-height:inherit;}.ReactCrop__child-wrapper > img,.ReactCrop__child-wrapper > video{display:block;max-width:100%;max-height:70vh;}.ReactCrop:not(.ReactCrop--disabled) .ReactCrop__child-wrapper > img,.ReactCrop:not(.ReactCrop--disabled) .ReactCrop__child-wrapper > video{touch-action:none;}.ReactCrop:not(.ReactCrop--disabled) .ReactCrop__crop-selection{touch-action:none;}.ReactCrop__crop-selection{position:absolute;top:0;left:0;transform:translate3d(0,0,0);cursor:move;box-shadow:0 0 0 9999em rgba(0,0,0,0.5);border:1px dashed #fff;}.ReactCrop--disabled .ReactCrop__crop-selection{cursor:inherit;}.ReactCrop--circular-crop .ReactCrop__crop-selection{border-radius:50%;box-shadow:0px 0px 1px 1px #fff,0 0 0 9999em rgba(0,0,0,0.5);}.ReactCrop__crop-selection:focus{outline:none;border-color:blue;border-style:solid;}.ReactCrop--invisible-crop .ReactCrop__crop-selection{display:none;}.ReactCrop__rule-of-thirds-vt::before,.ReactCrop__rule-of-thirds-vt::after,.ReactCrop__rule-of-thirds-hz::before,.ReactCrop__rule-of-thirds-hz::after{content:'';display:block;position:absolute;background-color:rgba(255,255,255,0.4);}.ReactCrop__rule-of-thirds-vt::before,.ReactCrop__rule-of-thirds-vt::after{width:1px;height:100%;}.ReactCrop__rule-of-thirds-vt::before{left:33.3333%;left:33.3333333333%;}.ReactCrop__rule-of-thirds-vt::after{left:66.6666%;left:66.6666666667%;}.ReactCrop__rule-of-thirds-hz::before,.ReactCrop__rule-of-thirds-hz::after{width:100%;height:1px;}.ReactCrop__rule-of-thirds-hz::before{top:33.3333%;top:33.3333333333%;}.ReactCrop__rule-of-thirds-hz::after{top:66.6666%;top:66.6666666667%;}.ReactCrop__drag-handle{position:absolute;}.ReactCrop__drag-handle::after{position:absolute;content:'';display:block;width:10px;height:10px;background-color:rgba(0,0,0,0.2);border:1px solid rgba(255,255,255,0.7);outline:1px solid rgba(0,0,0,0);}.ReactCrop__drag-handle:focus::after{border-color:blue;background:#2dbfff;}.ReactCrop .ord-nw{top:0;left:0;margin-top:-5px;margin-left:-5px;cursor:nw-resize;}.ReactCrop .ord-nw::after{top:0;left:0;}.ReactCrop .ord-n{top:0;left:50%;margin-top:-5px;margin-left:-5px;cursor:n-resize;}.ReactCrop .ord-n::after{top:0;}.ReactCrop .ord-ne{top:0;right:0;margin-top:-5px;margin-right:-5px;cursor:ne-resize;}.ReactCrop .ord-ne::after{top:0;right:0;}.ReactCrop .ord-e{top:50%;right:0;margin-top:-5px;margin-right:-5px;cursor:e-resize;}.ReactCrop .ord-e::after{right:0;}.ReactCrop .ord-se{bottom:0;right:0;margin-bottom:-5px;margin-right:-5px;cursor:se-resize;}.ReactCrop .ord-se::after{bottom:0;right:0;}.ReactCrop .ord-s{bottom:0;left:50%;margin-bottom:-5px;margin-left:-5px;cursor:s-resize;}.ReactCrop .ord-s::after{bottom:0;}.ReactCrop .ord-sw{bottom:0;left:0;margin-bottom:-5px;margin-left:-5px;cursor:sw-resize;}.ReactCrop .ord-sw::after{bottom:0;left:0;}.ReactCrop .ord-w{top:50%;left:0;margin-top:-5px;margin-left:-5px;cursor:w-resize;}.ReactCrop .ord-w::after{left:0;}.ReactCrop__disabled .ReactCrop__drag-handle{cursor:inherit;}.ReactCrop__drag-bar{position:absolute;}.ReactCrop__drag-bar.ord-n{top:0;left:0;width:100%;height:6px;margin-top:-3px;}.ReactCrop__drag-bar.ord-e{right:0;top:0;width:6px;height:100%;margin-right:-3px;}.ReactCrop__drag-bar.ord-s{bottom:0;left:0;width:100%;height:6px;margin-bottom:-3px;}.ReactCrop__drag-bar.ord-w{top:0;left:0;width:6px;height:100%;margin-left:-3px;}.ReactCrop--new-crop .ReactCrop__drag-bar,.ReactCrop--new-crop .ReactCrop__drag-handle,.ReactCrop--fixed-aspect .ReactCrop__drag-bar{display:none;}.ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-n,.ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-e,.ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-s,.ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-w{display:none;}@media (pointer:coarse){.ReactCrop .ord-n,.ReactCrop .ord-e,.ReactCrop .ord-s,.ReactCrop .ord-w{display:none;}.ReactCrop__drag-handle{width:24px;height:24px;}}"],mt.Z.px80,mt.Z.px24,mt.Z.px80,mt.Z.px48,mt.Z.px24,mt.Z.px80,mt.Z.px24,mt.Z.px80,mt.Z.px48,mt.Z.px24,mt.Z.px24,1024),on=Je.ZP.img.withConfig({componentId:"sc-1hrxn9g-1"})(["width:auto;max-width:100%;height:auto;"]),an=Je.ZP.div.withConfig({componentId:"sc-1hrxn9g-2"})(["display:grid;grid-template-columns:repeat(3,1fr);justify-self:stretch;place-items:center;"]),cn=(0,Je.ZP)(gt.IconButton).withConfig({componentId:"sc-1hrxn9g-3"})(["padding:0;color:",";&:hover{color:",";}svg{height:",";width:",";}"],yt.Z.white,yt.Z.grey900,mt.Z.px48,mt.Z.px48),sn=function(e){return new Promise((function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=function(){r(new Error("Image creation failed"))},n.src=e}))},un=function(e,t){return new Promise((function(r){return r(e.toDataURL("image/jpeg",null!==t&&void 0!==t?t:1))}))},ln=Math.PI/180,pn=function(e){var t=e.img,r=e.canvas,n=e.ctx,o=e.rotate;r.width=t.naturalWidth,r.height=t.naturalHeight,270!==o&&90!==o||(r.width=t.naturalHeight,r.height=t.naturalWidth),n.save(),n.translate(r.width/2,r.height/2),n.rotate(o*ln),180===o?n.translate(-r.width/2,-r.height/2):n.translate(-r.height/2,-r.width/2),n.drawImage(t,0,0),n.restore()},fn=function(e){var t=e.img,r=e.canvas,n=e.ctx,o=e.crop,a=t.naturalWidth/100,c=t.naturalHeight/100,i=a*o.width,s=c*o.height,u=a*o.x,l=c*o.y;r.width=i,r.height=s,n.drawImage(t,u,l,i,s,0,0,i,s)},dn=function(e){var t=e.img,r=e.canvas,n=e.ctx,o=e.maxWidth,a=e.maxHeight,c=function(e){return e.naturalHeight/e.naturalWidth}(t),i=t.naturalWidth,s=t.naturalHeight;o&&(s=(i=Math.min(t.naturalWidth,o))*c),a&&(i=(s=Math.min(t.naturalHeight,a))/c),r.width=i,r.height=s,n.drawImage(t,0,0,i,s)},hn=function(e){return{x:100-e.y-e.height,y:e.x,width:e.height,height:e.width,unit:e.unit}},gn=function(){var e=(0,$r.Z)(Jr().mark((function e(t,r){var n,o,a,c,i,s,u,l,p,f,d,h,g,m;return Jr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rotate,o=r.crop,a=r.maxWidth,c=r.quality,e.next=3,sn(t);case 3:return i=e.sent,e.next=6,new Promise((function(e,t){var r=document.createElement("canvas"),n=r.getContext("2d");if(null===n)return t(new Error("Context creation failed"));e({canvas:r,ctx:n})}));case 6:if(s=e.sent,u=s.canvas,l=s.ctx,(p=o)&&n)for(f=(360-n)/90,d=0;d<f;d++)p=hn(p);if(!a){e.next=23;break}if(h={img:i,canvas:u,ctx:l,maxWidth:a},90===n||270===n?null!==(g=p)&&void 0!==g&&g.height&&(h={img:i,canvas:u,ctx:l,maxHeight:Math.round(a/(p.height/100))}):null!==(m=p)&&void 0!==m&&m.width&&(h={img:i,canvas:u,ctx:l,maxWidth:Math.round(a/(p.width/100))}),dn(h),!n&&!p){e.next=23;break}return e.t0=sn,e.next=19,un(u);case 19:return e.t1=e.sent,e.next=22,(0,e.t0)(e.t1);case 22:i=e.sent;case 23:if(!p){e.next=33;break}if(fn({img:i,canvas:u,ctx:l,crop:p}),!n){e.next=33;break}return e.t2=sn,e.next=29,un(u);case 29:return e.t3=e.sent,e.next=32,(0,e.t2)(e.t3);case 32:i=e.sent;case 33:return n&&pn({img:i,canvas:u,ctx:l,rotate:n}),e.abrupt("return",un(u,c));case 35:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),mn=r(15030),bn=r.n(mn);function yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var vn=function(e){var t=e.image,r=e.onFinished,n=e.onCrop,o=e.setHasError,c=e.setIsProcessing,i=e["data-test"],s=(0,rt.useState)(t),u=(0,pt.Z)(s,2),l=u[0],p=u[1],f=(0,rt.useState)(0),d=(0,pt.Z)(f,2),h=d[0],g=d[1],m=(0,rt.useState)(tn),b=(0,pt.Z)(m,2),y=b[0],v=b[1],O=(0,rt.useRef)(!1),_=(0,rt.useMemo)((function(){return 0!==h||y.x!==tn.x||y.y!==tn.y||y.height!==tn.height||y.width!==tn.width}),[h,y]),E=(0,rt.useCallback)((0,$r.Z)(Jr().mark((function e(){return Jr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===c||void 0===c||c(!0),gn(t,{rotate:h,maxWidth:1200,crop:y,quality:.6}).then(r).catch((function(e){(0,ze.O7)({error:new Error(rn.IMAGE_PROCESSING_ON_DONE),location:w.IMAGE_CROPPING,severity:ze.zb.ERROR},{initialError:e}),null===c||void 0===c||c(!1),null===o||void 0===o||o(!0)}));case 2:case"end":return e.stop()}}),e)}))),[r,y,h]);return rt.createElement(nn,{"data-test":i},rt.createElement(bn(),{crop:y,onChange:function(e,t){return v(t)},onComplete:function(){return null===n||void 0===n?void 0:n()},"data-test":"".concat(i,"-crop")},rt.createElement(on,{alt:"Image to crop",src:l,"data-test":"".concat(i,"-img")})),rt.createElement(an,null,rt.createElement(cn,{"data-test":"".concat(i,"-rotate-button"),screenReaderOnlyText:"Rotate Image",onClick:function(){O.current||null===c||void 0===c||c(!0),gn(l,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({rotate:90},O.current?null:{maxWidth:1024,quality:.9})).then((function(e){p(e),g((function(e){return(e+90)%360})),v(hn),O.current=!0,null===c||void 0===c||c(!1)})).catch((function(e){null===o||void 0===o||o(!0),null===c||void 0===c||c(!1),(0,ze.O7)({error:new Error(rn.IMAGE_PROCESSING_ON_ROTATE),location:w.IMAGE_CROPPING,severity:ze.zb.ERROR},{initialError:e})}))},disableHoverAnimation:!0},rt.createElement(en.Z,{size:"large","aria-hidden":!0})),rt.createElement(gt.SecondaryButton,{"data-test":"".concat(i,"-reset-button"),variant:"outlined",onClick:function(){h?gn(l,{rotate:360-h}).then((function(e){g(0),v(tn),p(e)})):v(tn)},disabled:!_},"Reset"),rt.createElement(gt.Button,{onClick:E,"data-test":"".concat(i,"-done-button")},"Done")))},On=vn,_n=Je.ZP.div.withConfig({componentId:"sc-1dz3ax8-0"})(["position:fixed;z-index:1000;top:0;left:0;padding-right:",";padding-bottom:",";width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:",";opacity:0.95;"],mt.Z.px48,mt.Z.px40,yt.Z.dark),wn=Je.ZP.p.withConfig({componentId:"sc-1dz3ax8-1"})(["color:",";font-size:",";margin-top:",";"],yt.Z.white,at.Z.size.px16,mt.Z.px16),En=r(10895),Cn=function(e){var t=e.isShow,r=e.dataTest;return t?rt.createElement(_n,{"data-test":r},rt.createElement(En.Z,{size:"large",svgColor:yt.Z.cheggOrange}),rt.createElement(wn,null,"Loading...")):null},jn=Cn,Rn=r(60654),Pn=Je.ZP.div.withConfig({componentId:"j1ib4n-0"})(["width:100%;height:100%;padding:"," clamp(",",10vw,",") clamp(",",5vh,",");display:grid;align-content:stretch;"],mt.Z.px80,mt.Z.px24,mt.Z.px80,mt.Z.px24,mt.Z.px64),Sn=Je.ZP.div.withConfig({componentId:"j1ib4n-1"})(["padding:"," ",";position:fixed;top:10%;left:10vw;right:10vw;width:80vw;z-index:100;line-height:normal;"],mt.Z.px24,mt.Z.px32),xn=function(e){var t=e.isOpen,r=void 0!==t&&t,n=e.onClose,o=e.imgBlobBase64,a=e.hasError,c=e.setHasError,i=e.isProcessing,s=e.setIsProcessing,u=e.onCropFinished,l=e.onCropChanged,p=e.modalId,f=e["data-test"],d=(0,rt.useCallback)((function(){return c(!1)}),[]);return rt.createElement(Kr,{"aria-label":"image search",id:p,"data-test":f,isOpen:r,hideCloseButton:!0,onClose:n,leftTopElement:rt.createElement(gt.SecondaryButton,{"data-test":"".concat(f,"-cancel-btn"),variant:"outlined",onClick:n,leadingIcon:rt.createElement(Xr.Z,{pointing:"left",size:"small","aria-hidden":!0})},"Cancel")},rt.createElement(rt.Fragment,null,rt.createElement(Pn,null,a?rt.createElement(Sn,null,rt.createElement(Rn.wn,{id:"".concat(p,"-error-notification"),"data-test":"".concat(f,"-error-notification"),type:Rn.j_.Error,message:"Sorry, we couldn't recognize your image",onCloseClick:d})):null,o?rt.createElement(On,{"data-test":"".concat(f,"-cropping"),image:o,onFinished:u,onCrop:l,setHasError:c,setIsProcessing:s}):null),rt.createElement(jn,{dataTest:"image-search-loading",isShow:i})))},kn=xn,In=rt.forwardRef((function(e,t){var r=e.id,n=e.placeholder,o=e.initialQuery,a=e.bffSearchProfile,c=void 0===a?"bigegg-suggest":a,i=e.courseId,s=e.contentType,u=e.disableSuggestions,l=e.serverRenderAsMobile,p=e.clientName,f=e.searchButtonText,d=Hr({initialQuery:o,bffSearchProfile:c,courseId:i,contentType:s,disableSuggestions:u,clientName:p}),h=d.query,g=d.options,m=d.onClear,b=d.onSubmit,y=d.onInputChange,v=d.onInputFocus,O=d.onInputBlur,_=d.onResultSelect,w=d.removeSearchHistory,E=d.imageBlobBase64,C=d.modalOpen,j=d.onImgSelected,R=d.onCropFinished,P=d.onCropChanged,S=d.onImgSearchCancel,x=d.onCameraButtonClick,k=d.imgSearchHasError,I=d.imgSearchIsLoading,T=d.setImgSearchIsLoading,D=d.setImgSearchHasError;return rt.createElement(rt.Fragment,null,rt.createElement(Qr.SearchBox,{hasImageUpload:!0,ref:t,inputId:r,value:h,options:g,placeholder:n,onInputChange:function(){},onImageUpload:j,onCameraButtonClick:x,onInputFocus:v,onInputBlur:O,onChange:y,onSelect:_,onSubmit:b,onClear:m,onKeyDown:w,labelText:n,visuallyHideLabel:!0,maxListboxHeight:"75vh",serverRenderAsMobile:l,searchButtonText:f}),rt.createElement(kn,{modalId:"".concat(r,"-image-search-modal"),"data-test":"image-search-modal",isOpen:C,imgBlobBase64:E,onClose:S,hasError:k,onCropFinished:R,isProcessing:I,setIsProcessing:T,setHasError:D,onCropChanged:P}))}));In.displayName="Search";var Tn=In,Dn=Tt}}]);
//# sourceMappingURL=54029-8483d7a24370ef73.js.map